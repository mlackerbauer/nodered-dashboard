[{"id":"885f38dd.64a8b","type":"tab","label":"Bewegungsmelder","disabled":false,"info":""},{"id":"57fd27e5.8820b","type":"tab","label":"Helligkeits Sensor","disabled":false,"info":""},{"id":"ea3852ff.87d0d","type":"tab","label":"Temperatur","disabled":false,"info":""},{"id":"6edcc166.d0745","type":"tab","label":"Traffic","disabled":false,"info":""},{"id":"8eae0a4c.0fa16","type":"tab","label":"Wetter","disabled":false,"info":""},{"id":"584378c2.3e16c8","type":"tab","label":"Tesla","disabled":false,"info":""},{"id":"8411b0ae.d4815","type":"tab","label":"Plex","disabled":false,"info":""},{"id":"6ec04d69.f792c4","type":"tab","label":"Licht","disabled":false,"info":""},{"id":"6315aaed.c6044c","type":"tab","label":"Balkon","disabled":false,"info":""},{"id":"5dd66382.707434","type":"tab","label":"Flow 1","disabled":false,"info":""},{"id":"fe8da558.d7e79","type":"tab","label":"Flow 2","disabled":false,"info":""},{"id":"8544e604.9bf28","type":"subflow","name":"Errorhandler","info":"","category":"","in":[{"x":60,"y":40,"wires":[{"id":"66316629.0a05b"},{"id":"590d362e.ea16a8"},{"id":"f2ef2fbe.6b32e8"}]}],"out":[],"env":[{"name":"SentToSlack","type":"bool","value":"false","ui":{"icon":"font-awesome/fa-bell-slash-o","label":{},"type":"input","opts":{"types":["str","num","bool","json","bin","env"]}}},{"name":"LogToDebug","type":"bool","value":"true"},{"name":"LogToConsole","type":"bool","value":"true"}],"color":"#DDAA99"},{"id":"f8eade98.d4c83","type":"ui_base","theme":{"name":"theme-dark","lightTheme":{"default":"#0094CE","baseColor":"#0094CE","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"darkTheme":{"default":"#097479","baseColor":"#097479","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"customTheme":{"name":"Untitled Theme 1","default":"#4B7930","baseColor":"#4B7930","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","reset":false},"themeState":{"base-color":{"default":"#097479","value":"#097479","edited":false},"page-titlebar-backgroundColor":{"value":"#097479","edited":false},"page-backgroundColor":{"value":"#111111","edited":false},"page-sidebar-backgroundColor":{"value":"#333333","edited":false},"group-textColor":{"value":"#0eb8c0","edited":false},"group-borderColor":{"value":"#555555","edited":false},"group-backgroundColor":{"value":"#333333","edited":false},"widget-textColor":{"value":"#eeeeee","edited":false},"widget-backgroundColor":{"value":"#097479","edited":false},"widget-borderColor":{"value":"#333333","edited":false},"base-font":{"value":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"}},"angularTheme":{"primary":"indigo","accents":"blue","warn":"red","background":"grey"}},"site":{"name":"Dashboard","hideToolbar":"false","allowSwipe":"true","lockMenu":"true","allowTempTheme":"true","dateFormat":"DD/MM/YYYY","sizes":{"sx":48,"sy":48,"gx":6,"gy":6,"cx":6,"cy":6,"px":0,"py":0}}},{"id":"1eaefd75.304423","type":"ui_tab","z":"","name":"Home","icon":"device_hub","order":2,"disabled":false,"hidden":false},{"id":"ff4bc735.559d78","type":"ui_tab","z":"","name":"Bewegungsmelder","icon":"fa-gears","order":1,"disabled":false,"hidden":false},{"id":"a1521b71.7d2d2","type":"ui_group","z":"","name":"Bewegungsmelder Küche","tab":"ff4bc735.559d78","order":1,"disp":false,"width":"6","collapse":false},{"id":"ad710dfa.62646","type":"ui_group","z":"","name":"Bewegungsmelder","tab":"1eaefd75.304423","order":1,"disp":true,"width":"6","collapse":false},{"id":"3de2bfe.885bdc","type":"mqtt-broker","z":"","name":"Mosquito","broker":"192.168.178.41","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthRetain":"false","birthPayload":"","closeTopic":"","closeQos":"0","closeRetain":"false","closePayload":"","willTopic":"","willQos":"0","willRetain":"false","willPayload":""},{"id":"6e5cbd28.1b9ad4","type":"mqtt-broker","z":"","name":"Mosquitto","broker":"192.168.178.41","port":"1883","clientid":"nr-sh-tesla","usetls":false,"compatmode":true,"keepalive":"60","cleansession":false,"birthTopic":"","birthQos":"0","birthRetain":"false","birthPayload":"","closeTopic":"","closeQos":"0","closeRetain":"false","closePayload":"","willTopic":"","willQos":"0","willRetain":"false","willPayload":""},{"id":"50080bd6.4ef11c","type":"hue-bridge","z":"","name":"Unterhaching","bridge":"192.168.178.20","key":"LH-QtOj-eU2eEuoNfOP642Wmy9rkvkfSL2Of13Tr","interval":"3000","disableupdates":false},{"id":"3bfe0f7a.c8f3c","type":"ui_group","z":"","name":"Bewegungsmelder Bad","tab":"ff4bc735.559d78","order":1,"disp":false,"width":"6","collapse":false},{"id":"dbc4cafb.b40088","type":"ui_group","z":"","name":"Bewegungsmelder Wohnzimmer","tab":"ff4bc735.559d78","order":2,"disp":false,"width":"6","collapse":false},{"id":"45f8b729.0418e","type":"ui_group","z":"","name":"Wetter","tab":"41c382a3.e04d34","order":1,"disp":false,"width":"16","collapse":false},{"id":"8f7374bc.68e6c","type":"ui_tab","z":"","name":"Laakirchen","icon":"fa-home","order":4,"disabled":false,"hidden":false},{"id":"89324342.c8f23","type":"ui_group","z":"","name":"Laakirchen -> Unterhaching","tab":"8f7374bc.68e6c","order":2,"disp":true,"width":"16","collapse":false},{"id":"29fea05c.89c74","type":"ui_group","z":"","name":"Unterhaching -> Laakirchen","tab":"8f7374bc.68e6c","order":1,"disp":true,"width":"16","collapse":false},{"id":"da2d6788.88441","type":"ui_tab","z":"","name":"Work","icon":"fa-building-o","order":3,"disabled":false,"hidden":false},{"id":"d684314d.248e78","type":"ui_group","z":"","name":"Unterhaching -> IBM","tab":"da2d6788.88441","order":1,"disp":true,"width":"12","collapse":true},{"id":"c8bb26c6.8b4ba8","type":"ui_group","z":"","name":"IBM -> Unterhaching","tab":"da2d6788.88441","order":2,"disp":true,"width":"12","collapse":true},{"id":"41c382a3.e04d34","type":"ui_tab","z":"","name":"Wetter","icon":"fa-sun-o","order":6,"disabled":false,"hidden":false},{"id":"5e5454a0.6c1c9c","type":"ui_group","z":"","name":"Battery","tab":"51fa8fce.4f688","order":2,"disp":true,"width":3,"collapse":false},{"id":"51fa8fce.4f688","type":"ui_tab","z":"","name":"Tesla","icon":"fa-car","order":5,"disabled":false,"hidden":false},{"id":"861cddb4.9c01b8","type":"ui_tab","z":"","name":"Media","icon":"fa-television","order":7,"disabled":false,"hidden":false},{"id":"201cc4fb.18bf04","type":"ui_group","z":"","name":"Plex","tab":"861cddb4.9c01b8","order":1,"disp":true,"width":"6","collapse":false},{"id":"4a2dae.3a0a2254","type":"ui_tab","z":"","name":"Temperatur","icon":"fa-thermometer-three-quarters","disabled":false,"hidden":false},{"id":"b29df1b3.b7e948","type":"ui_group","z":"","name":"Temperatur","tab":"4a2dae.3a0a2254","order":1,"disp":true,"width":"6","collapse":false},{"id":"bf1fe0a6.f4b59","type":"ui_spacer","name":"spacer","group":"201cc4fb.18bf04","order":4,"width":6,"height":1},{"id":"73dcb767.ae637","type":"postgresdb","z":"584378c2.3e16c8","hostname":"database","port":"5432","db":"teslamate","ssl":false},{"id":"69900cfe.3924b4","type":"ui_tab","z":"","name":"Licht","icon":"fa-lightbulb-o","disabled":false,"hidden":false},{"id":"21282da4.492b4a","type":"ui_group","z":"","name":"Wohnzimmer","tab":"69900cfe.3924b4","order":2,"disp":true,"width":4,"collapse":false},{"id":"48cfd956.30fd68","type":"ui_group","z":"","name":"Bett","tab":"69900cfe.3924b4","order":3,"disp":true,"width":4,"collapse":false},{"id":"f27df86.b5fd508","type":"ui_group","z":"","name":"Küche","tab":"69900cfe.3924b4","order":4,"disp":true,"width":4,"collapse":false},{"id":"b2808322.a2e3a8","type":"ui_group","z":"","name":"Bad","tab":"69900cfe.3924b4","order":5,"disp":true,"width":4,"collapse":false},{"id":"be3e379d.f4f9","type":"ui_group","z":"","name":"Szenen","tab":"69900cfe.3924b4","order":1,"disp":true,"width":4,"collapse":false},{"id":"f7b884b7.08fc58","type":"ui_group","z":"","name":"Bewegungsmelder Bett","tab":"ff4bc735.559d78","order":4,"disp":false,"width":"6","collapse":false},{"id":"42955aa.8a9a824","type":"ui_group","z":"","name":"Bewegungsmelder Balkon","tab":"ff4bc735.559d78","order":5,"disp":false,"width":"6","collapse":false},{"id":"b3bdc4b1.d52828","type":"ui_tab","z":"","name":"Balkon","icon":"fa-tree","order":10,"disabled":false,"hidden":false},{"id":"51d7be6b.ed7668","type":"ui_group","z":"","name":"Wetter","tab":"b3bdc4b1.d52828","order":1,"disp":true,"width":"6","collapse":false},{"id":"23924ebf.cb12da","type":"device-config","z":"","name":"","serial":"1005000120","host":""},{"id":"b9ce39dd.8783c8","type":"gateway-config","z":"","name":"","host":"224.0.23.12","port":"3671","useTunneling":false},{"id":"1d78320b.75219e","type":"ui_group","z":"","name":"Masterswitches","tab":"ff039c1.10e6a6","order":6,"disp":false,"width":"6","collapse":false},{"id":"80b2e546.549f4","type":"ui_group","z":"","name":"Condition","tab":"dfe5e83a.e1d33","order":5,"disp":false,"width":"4","collapse":false},{"id":"6d3ea4cd.2130d4","type":"ui_group","z":"","name":"Wind","tab":"dfe5e83a.e1d33","order":4,"disp":false,"width":"4","collapse":false},{"id":"b73d4bfc.9cb888","type":"ui_group","z":"","name":"Luftfeuchtigkeit","tab":"ff039c1.10e6a6","order":4,"disp":false,"width":"6","collapse":false},{"id":"ea3ecfac.e00778","type":"ui_group","z":"","name":"Condition","tab":"dfe5e83a.e1d33","order":2,"disp":false,"width":"2","collapse":false},{"id":"2fb24bee.14dcdc","type":"ui_group","z":"","name":"Forecast","tab":"dfe5e83a.e1d33","order":6,"disp":false,"width":"8","collapse":false},{"id":"ff039c1.10e6a6","type":"ui_tab","z":"","name":"Home","icon":"home","order":1},{"id":"dfe5e83a.e1d33","type":"ui_tab","z":"","name":"Wetterstation","icon":"fa-thermometer-half","order":5,"disabled":false,"hidden":false},{"id":"60bbcdf9.f77dfc","type":"ui_group","z":"","name":"Weather Icons","tab":"79049d44.b89574","order":1,"disp":true,"width":"8"},{"id":"79049d44.b89574","type":"ui_tab","z":"","name":"Weather","icon":"dashboard"},{"id":"b0212a87.b8e9f","type":"ui_led","z":"885f38dd.64a8b","group":"dbc4cafb.b40088","order":1,"width":4,"height":1,"label":"<p style='color:blue'>Wohnzimmer</p>","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"red","value":"false","valueType":"bool"},{"color":"green","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"name":"Wohnzimmer Status","x":900,"y":640,"wires":[]},{"id":"77bfc098.ffe258","type":"mqtt in","z":"885f38dd.64a8b","name":"","topic":"/dashboard/in/motion/kueche/status","qos":"2","datatype":"json","broker":"3de2bfe.885bdc","x":260,"y":100,"wires":[[]]},{"id":"622f8cc9.8761d4","type":"mqtt in","z":"885f38dd.64a8b","name":"","topic":"/dashboard/in/motion/bad/status","qos":"2","datatype":"json","broker":"3de2bfe.885bdc","x":270,"y":160,"wires":[[]]},{"id":"7b9fb2f4.3cd3cc","type":"mqtt in","z":"885f38dd.64a8b","name":"","topic":"/dashboard/in/motion/wohnzimmer/status","qos":"2","datatype":"json","broker":"3de2bfe.885bdc","x":240,"y":40,"wires":[[]]},{"id":"4cd64731.71cb68","type":"debug","z":"8544e604.9bf28","name":"Log Debug","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":670,"y":40,"wires":[]},{"id":"1a497a6c.f2aabe","type":"mqtt out","z":"8544e604.9bf28","name":"","topic":"/slack/smarthome/out","qos":"","retain":"","broker":"6e5cbd28.1b9ad4","x":700,"y":160,"wires":[]},{"id":"66316629.0a05b","type":"switch","z":"8544e604.9bf28","name":"Slack","property":"SentToSlack","propertyType":"env","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":250,"y":160,"wires":[["82d4a63f.43af08"]]},{"id":"2602623.67c029e","type":"catch","z":"8544e604.9bf28","name":"","scope":null,"uncaught":false,"x":80,"y":460,"wires":[["919938d0.81b93"]]},{"id":"919938d0.81b93","type":"debug","z":"8544e604.9bf28","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":450,"y":460,"wires":[]},{"id":"82d4a63f.43af08","type":"function","z":"8544e604.9bf28","name":"Error Message","func":"var sFlowname = msg.flowinfo.flowname;\nvar sMessage = msg.error.message;\nvar sNode = msg.error.source.name;\n\nmsg.payload = {\n    \"text\": \"Failure in flow *\" + sFlowname + \"* in node *\" + sNode + \"*. \\n`\" + sMessage + \"`\"\n}\nreturn msg;","outputs":1,"noerr":0,"x":440,"y":160,"wires":[["1a497a6c.f2aabe"]]},{"id":"590d362e.ea16a8","type":"switch","z":"8544e604.9bf28","name":"Debug","property":"LogToDebug","propertyType":"env","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":250,"y":40,"wires":[["4cd64731.71cb68"]]},{"id":"f2ef2fbe.6b32e8","type":"switch","z":"8544e604.9bf28","name":"Console","property":"LogToConsole","propertyType":"env","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":260,"y":100,"wires":[["34d6d726.3c681"]]},{"id":"34d6d726.3c681","type":"debug","z":"8544e604.9bf28","name":"Log Console","active":true,"tosidebar":false,"console":true,"tostatus":false,"complete":"true","targetType":"full","x":680,"y":100,"wires":[]},{"id":"6d7439b1.7b03b8","type":"subflow:8544e604.9bf28","z":"885f38dd.64a8b","name":"","env":[{"name":"SentToSlack","value":"true","type":"bool"}],"x":550,"y":1200,"wires":[],"icon":"font-awesome/fa-exclamation"},{"id":"a22d20af.84c74","type":"catch","z":"885f38dd.64a8b","name":"","scope":null,"uncaught":false,"x":200,"y":1200,"wires":[["1c5abf30.a814c1"]]},{"id":"1c5abf30.a814c1","type":"getflowid","z":"885f38dd.64a8b","name":"Get Flow ID","x":370,"y":1200,"wires":[["6d7439b1.7b03b8"]]},{"id":"76e77520.9a57ec","type":"hue-motion","z":"885f38dd.64a8b","name":"Bad sensor","bridge":"50080bd6.4ef11c","sensorid":"15","skipevents":false,"x":310,"y":480,"wires":[["7e435f18.4de88","fa5e1e7a.cc8568","9a43c33c.f52618"]]},{"id":"8f9c0142.711d","type":"hue-motion","z":"885f38dd.64a8b","name":"Wohnzimmer Sensor","bridge":"50080bd6.4ef11c","sensorid":"38","skipevents":false,"x":280,"y":680,"wires":[["ecb4607d.bb899","93da8f67.3efc58","edd4b602.afad58"]]},{"id":"4515d799.b4a6a","type":"hue-motion","z":"885f38dd.64a8b","name":"Küchen Sensor","bridge":"50080bd6.4ef11c","sensorid":"66","skipevents":false,"x":300,"y":240,"wires":[["c4d8212f.0b779","3715ae36.9cacf2","deed8d71.5c6fa8"]]},{"id":"e3e74265.f1e928","type":"inject","z":"885f38dd.64a8b","name":"","topic":"","payload":"status","payloadType":"str","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":90,"y":400,"wires":[["76e77520.9a57ec","8f9c0142.711d","4515d799.b4a6a","88d1f13c.382dc8","40e5f3b9.ec64cc"]]},{"id":"ecb4607d.bb899","type":"function","z":"885f38dd.64a8b","name":"Wohnzimmer Status","func":"if (msg.payload.active === false) {\n    msg.payload = false;\n}\nelse {\n    msg.payload = true;\n}\n\nreturn msg;","outputs":1,"noerr":0,"x":580,"y":640,"wires":[["b0212a87.b8e9f","3aac80e8.c9d1e8"]]},{"id":"2a05c659.ad94c2","type":"ui_text","z":"885f38dd.64a8b","group":"dbc4cafb.b40088","order":4,"width":6,"height":1,"name":"Wohnzimmer Last Motion","label":"<font size=-2>Last Motion:</font>","format":"<font size=-2>{{msg.payload | date:'HH:mm:ss'}}</font>","layout":"row-left","x":910,"y":720,"wires":[]},{"id":"5634d062.d96fd8","type":"ui_led","z":"885f38dd.64a8b","group":"dbc4cafb.b40088","order":3,"width":1,"height":1,"label":"","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"grey","value":"false","valueType":"bool"},{"color":"yellow","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"name":"Wohnzimmer Motion","x":900,"y":680,"wires":[]},{"id":"93da8f67.3efc58","type":"change","z":"885f38dd.64a8b","name":"","rules":[{"t":"move","p":"payload.updated","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":600,"y":720,"wires":[["2a05c659.ad94c2"]]},{"id":"edd4b602.afad58","type":"change","z":"885f38dd.64a8b","name":"","rules":[{"t":"move","p":"payload.motion","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":600,"y":680,"wires":[["5634d062.d96fd8"]]},{"id":"fd5d2373.2021a","type":"ui_led","z":"885f38dd.64a8b","group":"3bfe0f7a.c8f3c","order":1,"width":4,"height":1,"label":"<p style='color:blue'>Badzimmer</p>","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"red","value":"false","valueType":"bool"},{"color":"green","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"name":"Bad Status","x":870,"y":440,"wires":[]},{"id":"7e435f18.4de88","type":"function","z":"885f38dd.64a8b","name":"Bad Status","func":"if (msg.payload.active === false) {\n    msg.payload = false;\n}\nelse {\n    msg.payload = true;\n}\n\nreturn msg;","outputs":1,"noerr":0,"x":550,"y":440,"wires":[["fd5d2373.2021a","12469c00.5d345c"]]},{"id":"2761f12f.281a4e","type":"ui_text","z":"885f38dd.64a8b","group":"3bfe0f7a.c8f3c","order":4,"width":6,"height":1,"name":"Bad Last Motion","label":"<font size=-2>Last Motion:</font>","format":"<font size=-2>{{msg.payload | date:'HH:mm:ss'}}</font>","layout":"row-left","x":880,"y":520,"wires":[]},{"id":"1bb52ef9.c39331","type":"ui_led","z":"885f38dd.64a8b","group":"3bfe0f7a.c8f3c","order":3,"width":1,"height":1,"label":"","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"grey","value":"false","valueType":"bool"},{"color":"yellow","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"name":"Bad Motion","x":870,"y":480,"wires":[]},{"id":"9a43c33c.f52618","type":"change","z":"885f38dd.64a8b","name":"","rules":[{"t":"move","p":"payload.updated","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":600,"y":520,"wires":[["2761f12f.281a4e"]]},{"id":"fa5e1e7a.cc8568","type":"change","z":"885f38dd.64a8b","name":"","rules":[{"t":"move","p":"payload.motion","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":600,"y":480,"wires":[["1bb52ef9.c39331"]]},{"id":"4318c47e.e403f4","type":"ui_led","z":"885f38dd.64a8b","group":"a1521b71.7d2d2","order":1,"width":4,"height":1,"label":"<p style='color:blue'>Küche</p>","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"red","value":"false","valueType":"bool"},{"color":"green","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"name":"Küchen Status","x":880,"y":200,"wires":[]},{"id":"c4d8212f.0b779","type":"function","z":"885f38dd.64a8b","name":"Küche Status","func":"if (msg.payload.active === false) {\n    msg.payload = false;\n}\nelse {\n    msg.payload = true;\n}\n\nreturn msg;","outputs":1,"noerr":0,"x":560,"y":200,"wires":[["4318c47e.e403f4","5cc000c1.18bc5"]]},{"id":"c131a300.72d97","type":"ui_text","z":"885f38dd.64a8b","group":"a1521b71.7d2d2","order":4,"width":6,"height":1,"name":"Küche Last Motion","label":"<font size=-2>Last Motion:</font>","format":"<font size=-2>{{msg.payload | date:'HH:mm:ss'}}</font>","layout":"row-left","x":890,"y":280,"wires":[]},{"id":"65d68598.4526e4","type":"ui_led","z":"885f38dd.64a8b","group":"a1521b71.7d2d2","order":3,"width":1,"height":1,"label":"","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"grey","value":"false","valueType":"bool"},{"color":"yellow","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"name":"Küchen Motion","x":880,"y":240,"wires":[]},{"id":"deed8d71.5c6fa8","type":"change","z":"885f38dd.64a8b","name":"","rules":[{"t":"move","p":"payload.updated","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":600,"y":280,"wires":[["c131a300.72d97"]]},{"id":"3715ae36.9cacf2","type":"change","z":"885f38dd.64a8b","name":"","rules":[{"t":"move","p":"payload.motion","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":600,"y":240,"wires":[["65d68598.4526e4"]]},{"id":"3a5569b.452e816","type":"inject","z":"6edcc166.d0745","name":"","topic":"","payload":"<iframe src=\"https://www.google.com/maps/dir/Von-Stauffenberg-Straße+96,+82008+Unterhaching,+Deutschland/Mies-van-der-Rohe-Straße+6,+80807+München,+Deutschland/@48.1184807,11.5446658,12z/data=!3m1!4b1!4m14!4m13!1m5!1m1!1s0x479de0a7bb0e9ab7:0x8491722c6ea7340e!2m2!1d11.62471!2d48.06102!1m5!1m1!1s0x479e744a685c3351:0x4922cdc869b0f9f0!2m2!1d11.59261!2d48.17645!3e0\">","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":170,"y":200,"wires":[[]]},{"id":"830f6b1.2501418","type":"inject","z":"6edcc166.d0745","name":"","topic":"","payload":"<iframe src=\"https://www.google.com/maps/embed?pb=!1m28!1m12!1m3!1d85234.32204803196!2d11.54466581769648!3d48.118480672399414!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!4m13!3e0!4m5!1s0x479de0a7bb0e9ab7%3A0x8491722c6ea7340e!2sVon-Stauffenberg-Stra%C3%9Fe%2096%2C%2082008%20Unterhaching%2C%20Deutschland!3m2!1d48.06102!2d11.62471!4m5!1s0x479e744a685c3351%3A0x4922cdc869b0f9f0!2sMies-van-der-Rohe-Stra%C3%9Fe%206%2C%2080807%20M%C3%BCnchen%2C%20Deutschland!3m2!1d48.176449999999996!2d11.592609999999999!5e0!3m2!1sen!2sde!4v1591454661033!5m2!1sen!2sde\" width=\"600\" height=\"450\" frameborder=\"0\" style=\"border:0;\" allowfullscreen=\"\" aria-hidden=\"false\" tabindex=\"0\"></iframe>","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":150,"y":300,"wires":[[]]},{"id":"58bb1340.2d47cc","type":"ui_template","z":"6edcc166.d0745","group":"89324342.c8f23","name":"Laakirchen - Unterhaching","order":1,"width":0,"height":0,"format":"<iframe src=\"https://www.google.com/maps/embed?pb=!1m28!1m12!1m3!1d682822.9187130033!2d12.271790167198839!3d48.04698867810587!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!4m13!3e0!4m5!1s0x4773f941e71373f3%3A0xfc16805b23835709!2sDoktor-Watzke-Stra%C3%9Fe%202%2C%20Laakirchen%2C%20%C3%96sterreich!3m2!1d47.9836398!2d13.819605899999999!4m5!1s0x479de0a7bb0e9ab7%3A0x8491722c6ea7340e!2sVon-Stauffenberg-Stra%C3%9Fe%2096%2C%2082008%20Unterhaching%2C%20Deutschland!3m2!1d48.06102!2d11.62471!5e0!3m2!1sen!2sde!4v1591535814186!5m2!1sen!2sde\" height=\"450\" frameborder=\"0\" style=\"border:0;\" allowfullscreen=\"\" aria-hidden=\"false\" tabindex=\"0\"></iframe>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":false,"templateScope":"local","x":540,"y":460,"wires":[[]]},{"id":"3078cdef.1a8bf2","type":"ui_template","z":"6edcc166.d0745","group":"29fea05c.89c74","name":"Unterhaching - Laakirchen","order":1,"width":0,"height":0,"format":"<iframe src=\"https://www.google.com/maps/embed?pb=!1m28!1m12!1m3!1d682044.4796787468!2d12.269906202263988!3d48.1056781820621!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!4m13!3e0!4m5!1s0x479de0a7bb0e9ab7%3A0x8491722c6ea7340e!2sVon-Stauffenberg-Stra%C3%9Fe%2096%2C%2082008%20Unterhaching%2C%20Deutschland!3m2!1d48.06102!2d11.62471!4m5!1s0x4773f96a991aed1b%3A0x1caeeb3b127afd43!2sDoktor-Watzke-Stra%C3%9Fe%2C%20Laakirchen%2C%20Austria!3m2!1d47.9845963!2d13.8171082!5e0!3m2!1sen!2sde!4v1591455264690!5m2!1sen!2sde\" height=\"450\" frameborder=\"0\" style=\"border:0;\" allowfullscreen=\"\" aria-hidden=\"false\" tabindex=\"0\"></iframe>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":false,"templateScope":"local","x":540,"y":540,"wires":[[]]},{"id":"3839e418.439204","type":"ui_template","z":"6edcc166.d0745","group":"d684314d.248e78","name":"Unterhaching -> IBM","order":0,"width":0,"height":0,"format":"<iframe src=\"https://www.google.com/maps/embed?pb=!1m28!1m12!1m3!1d85234.32204836287!2d11.544665489419245!3d48.11848067219996!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!4m13!3e0!4m5!1s0x479de0a7bb0e9ab7%3A0x8491722c6ea7340e!2sVon-Stauffenberg-Stra%C3%9Fe%2096%2C%2082008%20Unterhaching%2C%20Deutschland!3m2!1d48.06102!2d11.62471!4m5!1s0x479e744a685c3351%3A0x4922cdc869b0f9f0!2sMies-van-der-Rohe-Stra%C3%9Fe%206%2C%2080807%20M%C3%BCnchen%2C%20Deutschland!3m2!1d48.176449999999996!2d11.592609999999999!5e0!3m2!1sen!2sde!4v1591536512465!5m2!1sen!2sde\" height=\"750\" frameborder=\"0\" style=\"border:0;\" allowfullscreen=\"\" aria-hidden=\"true\" tabindex=\"0\"></iframe>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","x":600,"y":300,"wires":[[]]},{"id":"6d46ae36.0a68","type":"ui_template","z":"6edcc166.d0745","group":"c8bb26c6.8b4ba8","name":"IBM -> Unterhaching","order":0,"width":0,"height":0,"format":"<iframe src=\"https://www.google.com/maps/embed?pb=!1m28!1m12!1m3!1d85233.82258854!2d11.541308389429966!3d48.11878172222438!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!4m13!3e0!4m5!1s0x479e744a685c3351%3A0x4922cdc869b0f9f0!2sMies-van-der-Rohe-Stra%C3%9Fe%206%2C%2080807%20M%C3%BCnchen%2C%20Deutschland!3m2!1d48.176449999999996!2d11.592609999999999!4m5!1s0x479de0a7bb0e9ab7%3A0x8491722c6ea7340e!2sVon-Stauffenberg-Stra%C3%9Fe%2096%2C%2082008%20Unterhaching%2C%20Deutschland!3m2!1d48.06102!2d11.62471!5e0!3m2!1sen!2sde!4v1591536491591!5m2!1sen!2sde\" height=\"750\" frameborder=\"0\" style=\"border:0;\" allowfullscreen=\"\" aria-hidden=\"false\" tabindex=\"0\"></iframe>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","x":600,"y":340,"wires":[[]]},{"id":"b86cd19d.824d4","type":"ui_template","z":"8eae0a4c.0fa16","group":"45f8b729.0418e","name":"Wetter","order":1,"width":"16","height":"7","format":"<div id=\"cont_1510638d58b49862159cd0e7cb1c1295\"><script type=\"text/javascript\" async src=\"https://www.daswetter.com/wid_loader/1510638d58b49862159cd0e7cb1c1295\"></script></div>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","x":90,"y":40,"wires":[[]]},{"id":"5cc000c1.18bc5","type":"ui_switch","z":"885f38dd.64a8b","name":"Küchen Schalter","label":"","tooltip":"","group":"a1521b71.7d2d2","order":2,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":880,"y":140,"wires":[["2b9d0110.cdaede"]]},{"id":"2b9d0110.cdaede","type":"hue-motion","z":"885f38dd.64a8b","name":"Küchen Sensor","bridge":"50080bd6.4ef11c","sensorid":"66","skipevents":false,"x":1120,"y":140,"wires":[[]]},{"id":"12469c00.5d345c","type":"ui_switch","z":"885f38dd.64a8b","name":"Bad Schalter","label":"","tooltip":"","group":"3bfe0f7a.c8f3c","order":2,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":870,"y":380,"wires":[["eed4c115.624f8"]]},{"id":"eed4c115.624f8","type":"hue-motion","z":"885f38dd.64a8b","name":"Bad sensor","bridge":"50080bd6.4ef11c","sensorid":"15","skipevents":false,"x":1110,"y":380,"wires":[[]]},{"id":"3aac80e8.c9d1e8","type":"ui_switch","z":"885f38dd.64a8b","name":"Wohnzimmer Schalter","label":"","tooltip":"","group":"dbc4cafb.b40088","order":2,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":900,"y":580,"wires":[["1ce074dd.90da93"]]},{"id":"1ce074dd.90da93","type":"hue-motion","z":"885f38dd.64a8b","name":"Wohnzimmer Sensor","bridge":"50080bd6.4ef11c","sensorid":"38","skipevents":false,"x":1140,"y":580,"wires":[[]]},{"id":"d8971fa.7ab14e","type":"ui_button","z":"8411b0ae.d4815","name":"Play","group":"201cc4fb.18bf04","order":1,"width":0,"height":0,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"","icon":"mi-play_arrow","payload":"","payloadType":"str","topic":"","x":430,"y":460,"wires":[["c48f121f.af0e98","4a044698.158048"]]},{"id":"759b4a89.be540c","type":"ui_button","z":"8411b0ae.d4815","name":"Stop","group":"201cc4fb.18bf04","order":3,"width":0,"height":0,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"","icon":"mi-stop","payload":"","payloadType":"str","topic":"","x":430,"y":520,"wires":[["bd3a7d08.be7de8"]]},{"id":"b2e0ed2a.de06c","type":"ui_button","z":"8411b0ae.d4815","name":"Pause","group":"201cc4fb.18bf04","order":2,"width":0,"height":0,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"","icon":"mi-pause","payload":"","payloadType":"str","topic":"","x":430,"y":580,"wires":[["6ed5c066.4c78b8"]]},{"id":"2cde45b4.633faa","type":"ui_slider","z":"8411b0ae.d4815","name":"Volume","label":"","tooltip":"","group":"201cc4fb.18bf04","order":7,"width":0,"height":0,"passthru":true,"outs":"all","topic":"","min":0,"max":"50","step":1,"x":240,"y":260,"wires":[[]]},{"id":"175b2093.1d70c7","type":"ui_valuetrail","z":"ea3852ff.87d0d","group":"b29df1b3.b7e948","order":0,"width":0,"height":0,"name":"Bad","label":"","unit":"°","blur":true,"minmax":true,"showvalue":true,"decimals":"1","colorLine":"#ff9900","colorFromTheme":true,"stroke":2,"property":"payload","pointcount":8,"x":750,"y":380,"wires":[]},{"id":"206a2197.0b2ebe","type":"hue-temperature","z":"ea3852ff.87d0d","name":"Hue temperature sensor 4","bridge":"50080bd6.4ef11c","sensorid":"68","skipevents":false,"x":310,"y":360,"wires":[["c73a8174.6e41e8"]]},{"id":"c73a8174.6e41e8","type":"change","z":"ea3852ff.87d0d","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.celsius","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":360,"wires":[["175b2093.1d70c7","292cc684.935c4a"]]},{"id":"c48f121f.af0e98","type":"mqtt out","z":"8411b0ae.d4815","name":"","topic":"/plex/play","qos":"","retain":"","broker":"3de2bfe.885bdc","x":680,"y":460,"wires":[]},{"id":"bd3a7d08.be7de8","type":"mqtt out","z":"8411b0ae.d4815","name":"","topic":"/plex/stop","qos":"","retain":"","broker":"3de2bfe.885bdc","x":680,"y":520,"wires":[]},{"id":"6ed5c066.4c78b8","type":"mqtt out","z":"8411b0ae.d4815","name":"","topic":"/plex/pause","qos":"","retain":"","broker":"3de2bfe.885bdc","x":690,"y":580,"wires":[]},{"id":"4a044698.158048","type":"debug","z":"8411b0ae.d4815","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":680,"y":420,"wires":[]},{"id":"7a4a1f17.02f278","type":"ui_button","z":"8411b0ae.d4815","name":"Unmute","group":"201cc4fb.18bf04","order":6,"width":3,"height":1,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"{{msg.background}}","icon":"mi-volume_up","payload":"","payloadType":"str","topic":"","x":420,"y":920,"wires":[["20322ac3.88b3c6","c9e6859b.31a7a","c929e3b9.bef7a8"]]},{"id":"20322ac3.88b3c6","type":"mqtt out","z":"8411b0ae.d4815","name":"","topic":"/home/unmute","qos":"","retain":"","broker":"3de2bfe.885bdc","x":700,"y":920,"wires":[]},{"id":"c929e3b9.bef7a8","type":"change","z":"8411b0ae.d4815","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"grey","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":420,"y":860,"wires":[["7a4a1f17.02f278"]]},{"id":"c8cc5638.e9885","type":"ui_button","z":"8411b0ae.d4815","name":"Mute","group":"201cc4fb.18bf04","order":5,"width":3,"height":1,"passthru":false,"label":"","tooltip":"","color":"","bgcolor":"{{msg.background}}","icon":"mi-volume_off","payload":"","payloadType":"str","topic":"","x":430,"y":660,"wires":[["d46b2294.a6c768","99178233.685f88","5e039449.6d7e8c"]]},{"id":"d46b2294.a6c768","type":"mqtt out","z":"8411b0ae.d4815","name":"","topic":"/home/mute","qos":"","retain":"","broker":"3de2bfe.885bdc","x":690,"y":660,"wires":[]},{"id":"c9e6859b.31a7a","type":"change","z":"8411b0ae.d4815","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":420,"y":760,"wires":[["c8cc5638.e9885"]]},{"id":"99178233.685f88","type":"change","z":"8411b0ae.d4815","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"grey","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":420,"y":720,"wires":[["c8cc5638.e9885"]]},{"id":"5e039449.6d7e8c","type":"change","z":"8411b0ae.d4815","name":"","rules":[{"t":"set","p":"background","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":420,"y":820,"wires":[["7a4a1f17.02f278"]]},{"id":"53425523.48b194","type":"ui_artlessgauge","z":"584378c2.3e16c8","group":"5e5454a0.6c1c9c","order":1,"width":3,"height":3,"name":"Battery","icon":"mi-electric_car","label":"Battery","unit":"%","layout":"radial","decimals":0,"differential":false,"minmax":false,"colorTrack":"#555555","colorFromTheme":true,"property":"payload","sectors":[{"val":0,"col":"#ff2600","t":"min","dot":0},{"val":30,"col":"#fffc00","t":"sec","dot":0},{"val":60,"col":"#77bb40","t":"sec","dot":0},{"val":100,"col":"#77bb40","t":"max","dot":0}],"lineWidth":"7","bgcolorFromTheme":true,"diffCenter":"","x":940,"y":120,"wires":[]},{"id":"e0abbb05.18dbc8","type":"postgres","z":"584378c2.3e16c8","postgresdb":"73dcb767.ae637","name":"Q Battery","output":true,"perrow":false,"rowspermsg":"1","outputs":1,"x":540,"y":120,"wires":[["2b89cbb3.0077bc"]]},{"id":"2b89cbb3.0077bc","type":"change","z":"584378c2.3e16c8","name":"Battery Level","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload[0].battery_level","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":730,"y":120,"wires":[["53425523.48b194"]]},{"id":"4ac2201e.8537f8","type":"ui_ui_control","z":"584378c2.3e16c8","name":"Changes","events":"change","x":120,"y":120,"wires":[["e7b81831.1918b8","667531f0.e2ae8","2730bb67.a2f5bc"]]},{"id":"e7b81831.1918b8","type":"change","z":"584378c2.3e16c8","name":"Battery Query","rules":[{"t":"set","p":"payload","pt":"msg","to":"(SELECT battery_level, date FROM positions WHERE car_id = 1 ORDER BY date DESC LIMIT 1)","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":340,"y":120,"wires":[["e0abbb05.18dbc8"]]},{"id":"2745f60.029ad0a","type":"ui_text","z":"584378c2.3e16c8","group":"5e5454a0.6c1c9c","order":2,"width":0,"height":0,"name":"Range","label":"Range","format":"{{msg.payload}}","layout":"col-center","x":930,"y":180,"wires":[]},{"id":"e37f2d09.2bbf5","type":"postgres","z":"584378c2.3e16c8","postgresdb":"73dcb767.ae637","name":"Q Range","output":true,"perrow":false,"rowspermsg":"1","outputs":1,"x":540,"y":180,"wires":[["af88d8e0.af817"]]},{"id":"667531f0.e2ae8","type":"change","z":"584378c2.3e16c8","name":"Range Query","rules":[{"t":"set","p":"payload","pt":"msg","to":"select  rated_battery_range_km from positions where car_id = 1 and rated_battery_range_km is not null order by date desc limit 1;","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":330,"y":180,"wires":[["e37f2d09.2bbf5"]]},{"id":"87616331.b2a1b8","type":"postgres","z":"584378c2.3e16c8","postgresdb":"73dcb767.ae637","name":"Q Odometer","output":true,"perrow":false,"rowspermsg":"1","outputs":1,"x":550,"y":240,"wires":[["fb1191a2.4fc198"]]},{"id":"2730bb67.a2f5bc","type":"change","z":"584378c2.3e16c8","name":"Odometer Query","rules":[{"t":"set","p":"payload","pt":"msg","to":"select  odometer from positions where car_id = 1 order by date desc limit 1;","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":350,"y":240,"wires":[["87616331.b2a1b8"]]},{"id":"44033780.bf8768","type":"ui_text","z":"584378c2.3e16c8","group":"5e5454a0.6c1c9c","order":3,"width":0,"height":0,"name":"Odometer","label":"Odometer","format":"{{msg.payload}}","layout":"col-center","x":940,"y":240,"wires":[]},{"id":"fb1191a2.4fc198","type":"function","z":"584378c2.3e16c8","name":"Calc Odometer","func":"var odo = msg.payload[0].odometer;\nvar res = parseFloat(odo).toFixed(0) + \" km\";\nmsg.payload = res;\nreturn msg;","outputs":1,"noerr":0,"x":740,"y":240,"wires":[["44033780.bf8768"]]},{"id":"af88d8e0.af817","type":"function","z":"584378c2.3e16c8","name":"Calc Range","func":"var odo = msg.payload[0].rated_battery_range_km;\nvar res = parseFloat(odo).toFixed(0) + \" km\";\nmsg.payload = res;\nreturn msg;","outputs":1,"noerr":0,"x":730,"y":180,"wires":[["2745f60.029ad0a"]]},{"id":"e5254265.4fad28","type":"ui_button","z":"6ec04d69.f792c4","name":"Wohnzimmer Hell","group":"21282da4.492b4a","order":1,"width":0,"height":0,"passthru":false,"label":"Hell","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":470,"y":200,"wires":[["36c82045.32f4c8"]]},{"id":"f582b695.39687","type":"ui_button","z":"6ec04d69.f792c4","name":"Bett Fernsehen","group":"48cfd956.30fd68","order":1,"width":0,"height":0,"passthru":false,"label":"Fernsehen","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":460,"y":260,"wires":[["17b20758.2fd911"]]},{"id":"a5ec4cc9.03df2","type":"ui_button","z":"6ec04d69.f792c4","name":"Küche Kochen","group":"f27df86.b5fd508","order":1,"width":0,"height":0,"passthru":false,"label":"Kochen","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":460,"y":320,"wires":[[]]},{"id":"f9dd66a1.e7ee48","type":"ui_button","z":"6ec04d69.f792c4","name":"Bad Baden","group":"b2808322.a2e3a8","order":1,"width":0,"height":0,"passthru":false,"label":"Baden","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":450,"y":380,"wires":[[]]},{"id":"41dc7af2.67aa4c","type":"ui_button","z":"6ec04d69.f792c4","name":"Wohnzimmer Arbeiten","group":"21282da4.492b4a","order":2,"width":0,"height":0,"passthru":false,"label":"Arbeiten","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":480,"y":160,"wires":[["889cfc0c.035b28"]]},{"id":"8393b9fa.5cf418","type":"ui_button","z":"6ec04d69.f792c4","name":"Wohnzimmer Fernsehen","group":"21282da4.492b4a","order":3,"width":0,"height":0,"passthru":false,"label":"Fernsehen","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":490,"y":120,"wires":[["17b20758.2fd911"]]},{"id":"19eac1bc.49947e","type":"ui_button","z":"6ec04d69.f792c4","name":"Szene Hell","group":"be3e379d.f4f9","order":1,"width":0,"height":0,"passthru":false,"label":"Hell","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":450,"y":480,"wires":[["36c82045.32f4c8"]]},{"id":"fb6269b.136b798","type":"ui_button","z":"6ec04d69.f792c4","name":"Szene Arbeiten","group":"be3e379d.f4f9","order":2,"width":0,"height":0,"passthru":false,"label":"Arbeiten","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":460,"y":520,"wires":[["889cfc0c.035b28"]]},{"id":"57e96a67.61d0cc","type":"ui_button","z":"6ec04d69.f792c4","name":"Szene Gute Nacht","group":"be3e379d.f4f9","order":3,"width":0,"height":0,"passthru":false,"label":"Gute Nacht","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":470,"y":560,"wires":[["3ece5d9e.61414a"]]},{"id":"76182cee.57eafc","type":"ui_button","z":"6ec04d69.f792c4","name":"Szene Baden","group":"be3e379d.f4f9","order":4,"width":0,"height":0,"passthru":false,"label":"Baden","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":450,"y":600,"wires":[[]]},{"id":"36c82045.32f4c8","type":"mqtt out","z":"6ec04d69.f792c4","name":"","topic":"/home/scenes/hell","qos":"","retain":"","broker":"3de2bfe.885bdc","x":890,"y":200,"wires":[]},{"id":"17b20758.2fd911","type":"mqtt out","z":"6ec04d69.f792c4","name":"","topic":"/home/scenes/fernsehen","qos":"","retain":"","broker":"3de2bfe.885bdc","x":910,"y":260,"wires":[]},{"id":"889cfc0c.035b28","type":"mqtt out","z":"6ec04d69.f792c4","name":"","topic":"/home/scenes/arbeiten","qos":"","retain":"","broker":"3de2bfe.885bdc","x":910,"y":160,"wires":[]},{"id":"3ece5d9e.61414a","type":"mqtt out","z":"6ec04d69.f792c4","name":"","topic":"/home/scenes/gute-nacht","qos":"","retain":"","broker":"3de2bfe.885bdc","x":910,"y":560,"wires":[]},{"id":"7896bc96.c89cac","type":"hue-brightness","z":"57fd27e5.8820b","name":"Lichtsensor Bad","bridge":"50080bd6.4ef11c","sensorid":"16","skipevents":false,"x":220,"y":280,"wires":[["737adb46.7a854c"]]},{"id":"5fd9fcb.9723c04","type":"debug","z":"57fd27e5.8820b","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":630,"y":640,"wires":[]},{"id":"41e55787.def048","type":"hue-brightness","z":"57fd27e5.8820b","name":"Lichtsensor Wohnzimmer","bridge":"50080bd6.4ef11c","sensorid":"39","skipevents":false,"x":190,"y":180,"wires":[["56a9d89b.d98568"]]},{"id":"573df0cf.9b7848","type":"hue-brightness","z":"57fd27e5.8820b","name":"Lichtsensor Küche","bridge":"50080bd6.4ef11c","sensorid":"67","skipevents":false,"x":210,"y":380,"wires":[["4ea5966a.6914a8"]]},{"id":"d0f449a6.6e865","type":"ui_level","z":"57fd27e5.8820b","group":"a1521b71.7d2d2","order":5,"width":0,"height":0,"name":"Helligkeit Küche","label":"","colorHi":"#f8fbdc","colorWarn":"#fff995","colorNormal":"#ffc777","colorOff":"#595959","min":0,"max":"400","segWarn":"","segHigh":"","unit":"lux","layout":"sh","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"rainbow","textoptions":"custom","colorText":"#eeeeee","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"peaktime":3000,"x":880,"y":360,"wires":[]},{"id":"4ea5966a.6914a8","type":"change","z":"57fd27e5.8820b","name":"","rules":[{"t":"move","p":"payload.lux","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":580,"y":380,"wires":[["d0f449a6.6e865","2a7de120.80d9be"]]},{"id":"70946f1b.f4a1b8","type":"ui_level","z":"57fd27e5.8820b","group":"dbc4cafb.b40088","order":5,"width":0,"height":0,"name":"Helligkeit Wohnzimmer","label":"","colorHi":"#f8fbdc","colorWarn":"#fff86b","colorNormal":"#ffb43e","colorOff":"#595959","min":0,"max":"400","segWarn":"","segHigh":"","unit":"lux","layout":"sh","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"rainbow","textoptions":"default","colorText":"#eeeeee","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"peaktime":3000,"x":900,"y":200,"wires":[]},{"id":"737adb46.7a854c","type":"change","z":"57fd27e5.8820b","name":"","rules":[{"t":"move","p":"payload.lux","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":580,"y":280,"wires":[["7730d615.665f08","8865d320.cde148"]]},{"id":"7730d615.665f08","type":"ui_level","z":"57fd27e5.8820b","group":"3bfe0f7a.c8f3c","order":5,"width":0,"height":0,"name":"Helligkeit Bad","label":"","colorHi":"#f8fbdc","colorWarn":"#fff995","colorNormal":"#fec700","colorOff":"#595959","min":0,"max":"400","segWarn":"","segHigh":"","unit":"lux","layout":"sh","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"fixed","textoptions":"default","colorText":"#eeeeee","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"peaktime":3000,"x":880,"y":260,"wires":[]},{"id":"56a9d89b.d98568","type":"change","z":"57fd27e5.8820b","name":"","rules":[{"t":"move","p":"payload.lux","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":580,"y":180,"wires":[["70946f1b.f4a1b8","a3193f87.551688"]]},{"id":"e62d954f.190cd","type":"hue-bridge-node","z":"57fd27e5.8820b","name":"","bridge":"50080bd6.4ef11c","autoupdates":true,"skipglobalevents":false,"x":430,"y":640,"wires":[["5fd9fcb.9723c04"]]},{"id":"d5bb66d1.a5505","type":"inject","z":"57fd27e5.8820b","name":"","topic":"","payload":"true","payloadType":"bool","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":250,"y":640,"wires":[["e62d954f.190cd"]]},{"id":"8865d320.cde148","type":"ui_level","z":"57fd27e5.8820b","group":"b2808322.a2e3a8","order":2,"width":0,"height":0,"name":"Helligkeit Bad","label":"","colorHi":"#f8fbdc","colorWarn":"#fff995","colorNormal":"#fec700","colorOff":"#595959","min":0,"max":"400","segWarn":"","segHigh":"","unit":"lux","layout":"sh","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"fixed","textoptions":"default","colorText":"#eeeeee","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"peaktime":3000,"x":880,"y":300,"wires":[]},{"id":"2a7de120.80d9be","type":"ui_level","z":"57fd27e5.8820b","group":"f27df86.b5fd508","order":2,"width":0,"height":0,"name":"Helligkeit Küche","label":"","colorHi":"#f8fbdc","colorWarn":"#fff995","colorNormal":"#ffc777","colorOff":"#595959","min":0,"max":"400","segWarn":"","segHigh":"","unit":"lux","layout":"sh","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"rainbow","textoptions":"custom","colorText":"#eeeeee","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"peaktime":3000,"x":880,"y":400,"wires":[]},{"id":"a3193f87.551688","type":"ui_level","z":"57fd27e5.8820b","group":"21282da4.492b4a","order":4,"width":0,"height":0,"name":"Helligkeit Wohnzimmer","label":"","colorHi":"#f8fbdc","colorWarn":"#fff86b","colorNormal":"#ffb43e","colorOff":"#595959","min":0,"max":"400","segWarn":"","segHigh":"","unit":"lux","layout":"sh","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"rainbow","textoptions":"default","colorText":"#eeeeee","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"peaktime":3000,"x":900,"y":160,"wires":[]},{"id":"c763aa2c.891dc8","type":"ui_level","z":"57fd27e5.8820b","group":"f7b884b7.08fc58","order":5,"width":0,"height":0,"name":"Helligkeit Bett","label":"","colorHi":"#f8fbdc","colorWarn":"#fff86b","colorNormal":"#ffb43e","colorOff":"#595959","min":0,"max":"400","segWarn":"","segHigh":"","unit":"lux","layout":"sh","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"rainbow","textoptions":"default","colorText":"#eeeeee","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"peaktime":3000,"x":880,"y":100,"wires":[]},{"id":"6549490d.444808","type":"change","z":"57fd27e5.8820b","name":"","rules":[{"t":"move","p":"payload.lux","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":580,"y":80,"wires":[["c763aa2c.891dc8","a8b3d5c2.b5f588"]]},{"id":"a8b3d5c2.b5f588","type":"ui_level","z":"57fd27e5.8820b","group":"48cfd956.30fd68","order":4,"width":0,"height":0,"name":"Helligkeit Bett","label":"","colorHi":"#f8fbdc","colorWarn":"#fff86b","colorNormal":"#ffb43e","colorOff":"#595959","min":0,"max":"400","segWarn":"","segHigh":"","unit":"lux","layout":"sh","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"rainbow","textoptions":"default","colorText":"#eeeeee","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"peaktime":3000,"x":880,"y":60,"wires":[]},{"id":"5d4b745e.ade1cc","type":"subflow:8544e604.9bf28","z":"57fd27e5.8820b","name":"","env":[{"name":"SentToSlack","value":"true","type":"bool"}],"x":610,"y":760,"wires":[],"icon":"font-awesome/fa-exclamation"},{"id":"69379fa7.01b288","type":"catch","z":"57fd27e5.8820b","name":"","scope":null,"uncaught":false,"x":240,"y":760,"wires":[["bc4b0586.ea509"]]},{"id":"bc4b0586.ea509","type":"getflowid","z":"57fd27e5.8820b","name":"Get Flow ID","x":430,"y":760,"wires":[["5d4b745e.ade1cc"]]},{"id":"d8c4773d.7edde","type":"ui_led","z":"885f38dd.64a8b","group":"f7b884b7.08fc58","order":1,"width":4,"height":1,"label":"<p style='color:blue'>Bett</p>","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"red","value":"false","valueType":"bool"},{"color":"green","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"name":"Bett Status","x":870,"y":840,"wires":[]},{"id":"d2e78988.92872","type":"function","z":"885f38dd.64a8b","name":"Bett Status","func":"if (msg.payload.active === false) {\n    msg.payload = false;\n}\nelse {\n    msg.payload = true;\n}\n\nreturn msg;","outputs":1,"noerr":0,"x":550,"y":840,"wires":[["d8c4773d.7edde","e82cb72b.2cc58"]]},{"id":"18134a86.836dad","type":"ui_text","z":"885f38dd.64a8b","group":"f7b884b7.08fc58","order":4,"width":6,"height":1,"name":"Bett Last Motion","label":"<font size=-2>Last Motion:</font>","format":"<font size=-2>{{msg.payload | date:'HH:mm:ss'}}</font>","layout":"row-left","x":890,"y":920,"wires":[]},{"id":"9433f81.e224908","type":"ui_led","z":"885f38dd.64a8b","group":"f7b884b7.08fc58","order":3,"width":1,"height":1,"label":"","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"grey","value":"false","valueType":"bool"},{"color":"yellow","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"name":"Bett Motion","x":870,"y":880,"wires":[]},{"id":"abc71a12.e97198","type":"change","z":"885f38dd.64a8b","name":"","rules":[{"t":"move","p":"payload.updated","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":600,"y":920,"wires":[["18134a86.836dad"]]},{"id":"963b7b23.6790c","type":"change","z":"885f38dd.64a8b","name":"","rules":[{"t":"move","p":"payload.motion","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":600,"y":880,"wires":[["9433f81.e224908"]]},{"id":"e82cb72b.2cc58","type":"ui_switch","z":"885f38dd.64a8b","name":"Bett Schalter","label":"","tooltip":"","group":"f7b884b7.08fc58","order":2,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":870,"y":780,"wires":[["9b50a8ac.cbd39"]]},{"id":"3f6fdeb0.3d0c02","type":"ui_led","z":"885f38dd.64a8b","group":"42955aa.8a9a824","order":1,"width":4,"height":1,"label":"<p style='color:blue'>Balkon</p>","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"red","value":"false","valueType":"bool"},{"color":"green","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"name":"Balkon Status","x":880,"y":1040,"wires":[]},{"id":"e2eed3c6.220898","type":"function","z":"885f38dd.64a8b","name":"Balkon Status","func":"if (msg.payload.active === false) {\n    msg.payload = false;\n}\nelse {\n    msg.payload = true;\n}\n\nreturn msg;","outputs":1,"noerr":0,"x":560,"y":1040,"wires":[["3f6fdeb0.3d0c02","67dc9088.7e9778"]]},{"id":"8c3fb536.c7d84","type":"ui_text","z":"885f38dd.64a8b","group":"42955aa.8a9a824","order":4,"width":6,"height":1,"name":"Balkon Last Motion","label":"<font size=-2>Last Motion:</font>","format":"<font size=-2>{{msg.payload | date:'HH:mm:ss'}}</font>","layout":"row-left","x":890,"y":1120,"wires":[]},{"id":"44357623.e7157","type":"ui_led","z":"885f38dd.64a8b","group":"42955aa.8a9a824","order":3,"width":1,"height":1,"label":"","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"grey","value":"false","valueType":"bool"},{"color":"yellow","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"name":"Balkon Motion","x":880,"y":1080,"wires":[]},{"id":"fa32f7bc.1408e8","type":"change","z":"885f38dd.64a8b","name":"","rules":[{"t":"move","p":"payload.updated","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":600,"y":1120,"wires":[["8c3fb536.c7d84"]]},{"id":"c4fe8682.04f448","type":"change","z":"885f38dd.64a8b","name":"","rules":[{"t":"move","p":"payload.motion","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":600,"y":1080,"wires":[["44357623.e7157"]]},{"id":"67dc9088.7e9778","type":"ui_switch","z":"885f38dd.64a8b","name":"Balkon Schalter","label":"","tooltip":"","group":"42955aa.8a9a824","order":2,"width":1,"height":1,"passthru":true,"decouple":"false","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":880,"y":980,"wires":[[]]},{"id":"60f8b159.916028","type":"ui_level","z":"57fd27e5.8820b","group":"42955aa.8a9a824","order":5,"width":0,"height":0,"name":"Helligkeit Balkon","label":"","colorHi":"#f8fbdc","colorWarn":"#fff995","colorNormal":"#ffc777","colorOff":"#595959","min":0,"max":"1000","segWarn":"","segHigh":"","unit":"lux","layout":"sh","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"rainbow","textoptions":"custom","colorText":"#eeeeee","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"peaktime":3000,"x":890,"y":460,"wires":[]},{"id":"30998fb0.576d4","type":"change","z":"57fd27e5.8820b","name":"","rules":[{"t":"move","p":"payload.lux","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":580,"y":460,"wires":[["60f8b159.916028"]]},{"id":"a23bba72.5a4c7","type":"change","z":"ea3852ff.87d0d","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.celsius","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":460,"wires":[["e0be1d11.cb4bb","f62c060b.92b918"]]},{"id":"e0be1d11.cb4bb","type":"ui_valuetrail","z":"ea3852ff.87d0d","group":"51d7be6b.ed7668","order":0,"width":0,"height":0,"name":"Balkon","label":"","unit":"°","blur":true,"minmax":true,"showvalue":true,"decimals":"1","colorLine":"#ff9900","colorFromTheme":true,"stroke":2,"property":"payload","pointcount":8,"x":750,"y":440,"wires":[]},{"id":"88d1f13c.382dc8","type":"hue-motion","z":"885f38dd.64a8b","name":"Balkon","bridge":"50080bd6.4ef11c","sensorid":"78","skipevents":false,"x":330,"y":1080,"wires":[["e2eed3c6.220898","c4fe8682.04f448","fa32f7bc.1408e8"]]},{"id":"a7ab116.41c547","type":"hue-brightness","z":"57fd27e5.8820b","name":"Lichtsensor Balkon","bridge":"50080bd6.4ef11c","sensorid":"79","skipevents":false,"x":210,"y":460,"wires":[["30998fb0.576d4"]]},{"id":"954f7308.a6878","type":"hue-temperature","z":"ea3852ff.87d0d","name":"Hue outdoor temp. sensor 1","bridge":"50080bd6.4ef11c","sensorid":"80","skipevents":false,"x":300,"y":460,"wires":[["a23bba72.5a4c7"]]},{"id":"292cc684.935c4a","type":"ui_valuetrail","z":"ea3852ff.87d0d","group":"b2808322.a2e3a8","order":0,"width":0,"height":0,"name":"Bad","label":"","unit":"°","blur":true,"minmax":true,"showvalue":true,"decimals":"1","colorLine":"#ff9900","colorFromTheme":true,"stroke":2,"property":"payload","pointcount":8,"x":750,"y":340,"wires":[]},{"id":"bbb75c09.0b178","type":"ui_valuetrail","z":"ea3852ff.87d0d","group":"b29df1b3.b7e948","order":0,"width":0,"height":0,"name":"Bet","label":"","unit":"°","blur":true,"minmax":true,"showvalue":true,"decimals":"1","colorLine":"#ff9900","colorFromTheme":true,"stroke":2,"property":"payload","pointcount":8,"x":750,"y":80,"wires":[]},{"id":"d7a21b9b.557e5","type":"hue-temperature","z":"ea3852ff.87d0d","name":"Hue temperature sensor 1","bridge":"50080bd6.4ef11c","sensorid":"14","skipevents":false,"x":310,"y":60,"wires":[["3015a8d7.07f9a8"]]},{"id":"3015a8d7.07f9a8","type":"change","z":"ea3852ff.87d0d","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.celsius","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":60,"wires":[["bbb75c09.0b178","ad3ca8f9.287ee"]]},{"id":"ad3ca8f9.287ee","type":"ui_valuetrail","z":"ea3852ff.87d0d","group":"48cfd956.30fd68","order":0,"width":0,"height":0,"name":"Bett","label":"","unit":"°","blur":true,"minmax":true,"showvalue":true,"decimals":"1","colorLine":"#ff9900","colorFromTheme":true,"stroke":2,"property":"payload","pointcount":8,"x":750,"y":40,"wires":[]},{"id":"55a5f3fb.7a8dfc","type":"ui_valuetrail","z":"ea3852ff.87d0d","group":"b29df1b3.b7e948","order":0,"width":0,"height":0,"name":"Wohnzimmer","label":"","unit":"°","blur":true,"minmax":true,"showvalue":true,"decimals":"1","colorLine":"#ff9900","colorFromTheme":true,"stroke":2,"property":"payload","pointcount":8,"x":770,"y":180,"wires":[]},{"id":"af05d32.1af64b","type":"hue-temperature","z":"ea3852ff.87d0d","name":"Hue temperature sensor 3","bridge":"50080bd6.4ef11c","sensorid":"37","skipevents":false,"x":310,"y":160,"wires":[["4a638992.d1b6c"]]},{"id":"4a638992.d1b6c","type":"change","z":"ea3852ff.87d0d","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.celsius","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":160,"wires":[["55a5f3fb.7a8dfc","e0f152ab.aed8a"]]},{"id":"e0f152ab.aed8a","type":"ui_valuetrail","z":"ea3852ff.87d0d","group":"21282da4.492b4a","order":0,"width":0,"height":0,"name":"Wohnzimmer","label":"","unit":"°","blur":true,"minmax":true,"showvalue":true,"decimals":"1","colorLine":"#ff9900","colorFromTheme":true,"stroke":2,"property":"payload","pointcount":8,"x":770,"y":140,"wires":[]},{"id":"f9aff5da.bf1a18","type":"ui_valuetrail","z":"ea3852ff.87d0d","group":"b29df1b3.b7e948","order":0,"width":0,"height":0,"name":"Küche","label":"","unit":"°","blur":true,"minmax":true,"showvalue":true,"decimals":"1","colorLine":"#ff9900","colorFromTheme":true,"stroke":2,"property":"payload","pointcount":8,"x":750,"y":280,"wires":[]},{"id":"f8123d44.5c95c","type":"hue-temperature","z":"ea3852ff.87d0d","name":"Hue temperature sensor 1","bridge":"50080bd6.4ef11c","sensorid":"14","skipevents":false,"x":310,"y":260,"wires":[["a1edfb95.d5d7f"]]},{"id":"a1edfb95.d5d7f","type":"change","z":"ea3852ff.87d0d","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.celsius","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":560,"y":260,"wires":[["f9aff5da.bf1a18","44b827c0.7a3cf"]]},{"id":"44b827c0.7a3cf","type":"ui_valuetrail","z":"ea3852ff.87d0d","group":"f27df86.b5fd508","order":0,"width":0,"height":0,"name":"Küche","label":"","unit":"°","blur":true,"minmax":true,"showvalue":true,"decimals":"1","colorLine":"#ff9900","colorFromTheme":true,"stroke":2,"property":"payload","pointcount":8,"x":750,"y":240,"wires":[]},{"id":"f62c060b.92b918","type":"ui_valuetrail","z":"ea3852ff.87d0d","group":"b29df1b3.b7e948","order":0,"width":0,"height":0,"name":"Balkon","label":"","unit":"°","blur":true,"minmax":true,"showvalue":true,"decimals":"1","colorLine":"#ff9900","colorFromTheme":true,"stroke":2,"property":"payload","pointcount":8,"x":750,"y":480,"wires":[]},{"id":"40e5f3b9.ec64cc","type":"hue-motion","z":"885f38dd.64a8b","name":"Bett","bridge":"50080bd6.4ef11c","sensorid":"83","skipevents":false,"x":330,"y":880,"wires":[["d2e78988.92872","963b7b23.6790c","abc71a12.e97198"]]},{"id":"9b50a8ac.cbd39","type":"hue-motion","z":"885f38dd.64a8b","name":"Bett","bridge":"50080bd6.4ef11c","sensorid":"83","skipevents":false,"x":1090,"y":780,"wires":[[]]},{"id":"42f4dcfd.ba6efc","type":"hue-brightness","z":"57fd27e5.8820b","name":"Lichtsensor Bett","bridge":"50080bd6.4ef11c","sensorid":"84","skipevents":false,"x":220,"y":80,"wires":[["6549490d.444808"]]},{"id":"db8e111a.45d53","type":"maps","z":"5dd66382.707434","name":"","path":"maps","maptitle":"Map title","x":380,"y":300,"wires":[[]]},{"id":"3f3f682b.f2b418","type":"openweathermap","z":"5dd66382.707434","name":"","wtype":"onecall","lon":"11.61","lat":"48.07","city":"","country":"","language":"de","x":380,"y":440,"wires":[["b0281d8c.2a8ea8"]]},{"id":"682be56a.066f34","type":"openweathermap in","z":"5dd66382.707434","name":"","wtype":"current","lon":"","lat":"","city":"Unterhaching","country":"Germany","language":"en","x":420,"y":580,"wires":[["a1a04239.90fce"]]},{"id":"2c334b7.a3f3934","type":"worldmap","z":"5dd66382.707434","name":"","lat":"12","lon":"43","zoom":"","layer":"OSM grey","cluster":"","maxage":"","usermenu":"show","layers":"show","panit":"false","panlock":"false","zoomlock":"false","hiderightclick":"false","coords":"none","showgrid":"false","path":"/worldmap","x":700,"y":300,"wires":[]},{"id":"94d0c46f.5bea08","type":"realtime","z":"5dd66382.707434","name":"","device":"23924ebf.cb12da","x":330,"y":700,"wires":[["9a377f22.3339c"]]},{"id":"9a377f22.3339c","type":"debug","z":"5dd66382.707434","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":610,"y":700,"wires":[]},{"id":"b0281d8c.2a8ea8","type":"debug","z":"5dd66382.707434","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":620,"y":440,"wires":[]},{"id":"b2959c74.c1bbd8","type":"inject","z":"5dd66382.707434","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":140,"y":440,"wires":[["3f3f682b.f2b418"]]},{"id":"eaa023b6.fa6998","type":"aggregated","z":"5dd66382.707434","name":"","device":"23924ebf.cb12da","x":340,"y":820,"wires":[["9a377f22.3339c"]]},{"id":"a1a04239.90fce","type":"debug","z":"5dd66382.707434","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":640,"y":580,"wires":[]},{"id":"e5816b82.ce42f","type":"inject","z":"8eae0a4c.0fa16","name":"Refresh Timer","topic":"Refresh Timer","payload":"true","payloadType":"bool","repeat":"3600","crontab":"","once":false,"onceDelay":"","x":120,"y":160,"wires":[["da67d805.2cb6d","a3bdfb30.3d015"]]},{"id":"25005de3.ea5afa","type":"ui_button","z":"8eae0a4c.0fa16","name":"Weather Refresh","group":"1d78320b.75219e","order":1,"width":0,"height":0,"passthru":false,"label":"Aktualisieren","tooltip":"Wetterdaten aktualisieren","color":"","bgcolor":"","icon":"fa-refresh","payload":"true","payloadType":"bool","topic":"","x":90,"y":240,"wires":[["da67d805.2cb6d","a3bdfb30.3d015"]]},{"id":"83b87615.d02b3","type":"ui_text","z":"8eae0a4c.0fa16","group":"80b2e546.549f4","order":1,"width":4,"height":1,"name":"Condition Txt","label":"","format":"{{msg.payload.detail}}","layout":"row-center","x":970,"y":160,"wires":[]},{"id":"3fc59fad.1074c","type":"function","z":"8eae0a4c.0fa16","name":"Prepare Dashboard Data","func":"var windDirection = {};\nvar windDirectionIcon = {};\nvar windSpeed = {};\nvar windSpeedIcon = {};\nvar sunRise = {};\nvar sunSet = {};\nvar conditionIcon = {};\nvar date = new Date ();\n\n/* function for converting meteorogical degree to text */\n\nvar degToCard = function(deg){\nif (deg>11.25 && deg<=33.75){\nreturn \"Nord-Nord-Ost\";\n  }else if (deg>33.75 && deg<56.25){\nreturn \"Nord-Ost\";\n  }else if (deg>56.25 && deg<78.75){\nreturn \"Ost-Nord-Ost\";\n  }else if (deg>78.75 && deg<101.25){\nreturn \"Ost\";\n  }else if (deg>101.25 && deg<123.75){\nreturn \"Ost-Süd-Ost\";\n  }else if (deg>123.75 && deg<146.25){\nreturn \"Süd-Ost\";\n  }else if (deg>146.25 && deg<168.75){\nreturn \"Süd-Süd-Ost\";\n  }else if (deg>168.75 && deg<191.25){\nreturn \"Süd\";\n  }else if (deg>191.25 && deg<213.75){\nreturn \"Süd-Süd-West\";\n  }else if (deg>213.75 && deg<236.25){\nreturn \"Süd-West\";\n  }else if (deg>236.25 && deg<258.75){\nreturn \"West-Süd-West\";\n  }else if (deg>258.75 && deg<281.25){\nreturn \"West\";\n  }else if (deg>281.25 && deg<303.75){\nreturn \"West-Nord-West\";\n  }else if (deg>303.75 && deg<326.25){\nreturn \"Nord-West\";\n  }else if (deg>326.25 && deg<348.75){\nreturn \"Nord-Nord-West\";\n  }else{\nreturn \"Nord\"; \n  }\n}\n\n/* function for converting meteorogical degree to weather icons */\n\nvar degToCardIcon = function(deg){\nif (deg>11.25 && deg<=33.75){\nreturn \"wi-from-nne\";\n  }else if (deg>33.75 && deg<56.25){\nreturn \"wi-from-ne\";\n  }else if (deg>56.25 && deg<78.75){\nreturn \"wi-from-ene\";\n  }else if (deg>78.75 && deg<101.25){\nreturn \"wi-from-e\";\n  }else if (deg>101.25 && deg<123.75){\nreturn \"wi-from-ese\";\n  }else if (deg>123.75 && deg<146.25){\nreturn \"wi-from-se\";\n  }else if (deg>146.25 && deg<168.75){\nreturn \"wi-from-sse\";\n  }else if (deg>168.75 && deg<191.25){\nreturn \"wi-from-s\";\n  }else if (deg>191.25 && deg<213.75){\nreturn \"wi-from-ssw\";\n  }else if (deg>213.75 && deg<236.25){\nreturn \"wi-from-sw\";\n  }else if (deg>236.25 && deg<258.75){\nreturn \"wi-from-wsw\";\n  }else if (deg>258.75 && deg<281.25){\nreturn \"wi-from-w\";\n  }else if (deg>281.25 && deg<303.75){\nreturn \"wi-from-wnw\";\n  }else if (deg>303.75 && deg<326.25){\nreturn \"wi-from-nw\";\n  }else if (deg>326.25 && deg<348.75){\nreturn \"wi-from-nnw\";\n  }else{\nreturn \"wi-from-n\"; \n  }\n}\n\n/* Function for converting wind speed into Beaufort scale icon */\n\nvar speedToCardIcon = function(speed){\nif (speed>0.5 && speed<=1.5){\nreturn \"wi-wind-beaufort-1\";\n  }else if (speed>1.5 && speed<=3.3){\nreturn \"wi-wind-beaufort-2\";\n  }else if (speed>3.3 && speed<=5.5){\nreturn \"wi-wind-beaufort-3\";\n  }else if (speed>5.5 && speed<=7.9){\nreturn \"wi-wind-beaufort-4\";\n  }else if (speed>7.9 && speed<=10.7){\nreturn \"wi-wind-beaufort-5\";\n  }else if (speed>10.7 && speed<=13.8){\nreturn \"wi-wind-beaufort-6\";\n  }else if (speed>13.8 && speed<=17.1){\nreturn \"wi-wind-beaufort-7\";\n  }else if (speed>17.1 && speed<=20.7){\nreturn \"wi-wind-beaufort-8\";\n  }else if (speed>20.7 && speed<=24.4){\nreturn \"wi-wind-beaufort-9\";\n  }else if (speed>24.4 && speed<=28.4){\nreturn \"wi-wind-beaufort-10\";\n  }else if (speed>28.4 && speed<=32.6){\nreturn \"wi-wind-beaufort-11\";\n  }else if (speed>32.6){\nreturn \"wi-wind-beaufort-12\";\n  }else{\nreturn \"wi-wind-beaufort-0\"; \n  }\n}\n\n/* Function for Time Conversions */\n\nfunction timeConverter(UNIX_timestamp){\n  var a = new Date(UNIX_timestamp * 1000);\n  var hour = a.getHours();\n  var min = a.getMinutes();\n  if (min < 10) {min = \"0\" + min;}\n    else {min = min;}\n  var sec = a.getSeconds();\n  if (sec < 10) {sec = \"0\" + sec;}\n    else {sec = sec;}\n    \n  var time = hour + ':' + min + ':' + sec ;\n  return time;\n}\n\n/* Convert OpenWeeather Map Icon to https://erikflowers.github.io/weather-icons/ */\n\nconst owIconMap = new Map();\n\nowIconMap.set('01d', 'wi-day-sunny'); // clear sky\nowIconMap.set('02d', 'wi-day-cloudy'); // few clouds\nowIconMap.set('03d', 'wi-cloud'); // scattered clouds\nowIconMap.set('04d', 'wi-cloudy'); // broken clouds\nowIconMap.set('09d', 'wi-day-showers'); // shower rain\nowIconMap.set('10d', 'wi-day-rain'); // rain\nowIconMap.set('11d', 'wi-thunderstorm'); // thunderstorm\nowIconMap.set('13d', 'wi-snow'); // snow\nowIconMap.set('50d', 'wi-fog'); // mist\nowIconMap.set('01n', 'wi-night-clear'); // clear sky\nowIconMap.set('02n', 'wi-night-alt-cloudy'); // few clouds\nowIconMap.set('03n', 'wi-cloud'); // scattered clouds\nowIconMap.set('04n', 'wi-cloudy'); // broken clouds\nowIconMap.set('09n', 'wi-night-alt-showers'); // shower rain\nowIconMap.set('10n', 'wi-night-alt-rain'); // rain\nowIconMap.set('11n', 'wi-thunderstorm'); // thunderstorm\nowIconMap.set('13n', 'wi-snow'); // snow\nowIconMap.set('50n', 'wi-fog'); // mist\n\nconditionIcon.topic = \"ConditionIcon\";\nconditionIcon.payload = owIconMap.get(msg.payload.icon);\n\nwindDirection.topic = \"WindDirection\";\nwindDirection.payload = degToCard(msg.payload.winddirection);\n\nwindDirectionIcon.topic = \"WindDirectionIcon\";\nwindDirectionIcon.payload = degToCardIcon(msg.payload.winddirection);\n\nwindSpeed.topic = \"WindSpeed\";\nwindSpeed.payload = msg.payload.windspeed +  \" m/s\"; /* \" + windDirection.payload; */\n\nwindSpeedIcon.topic = \"WindSpeedIcon\";\nwindSpeedIcon.payload = speedToCardIcon(msg.payload.windspeed);\n\nsunRise.topic = \"SunRise\";\nsunRise.payload = timeConverter(msg.payload.sunrise);\n\nsunSet.topic = \"SunRet\";\nsunSet.payload = timeConverter(msg.payload.sunset);\n\nowIconMap.clear(); //freeing resource\n\nreturn [conditionIcon, windSpeedIcon, windSpeed, windDirection, windDirectionIcon, sunRise, sunSet];","outputs":7,"noerr":0,"x":660,"y":320,"wires":[["3c530ca4.18ce4c"],["b19a219.cf715e"],["c8c9e048.09e4f"],[],["efa08bbf.24bf98"],["aef3b4a8.7ecf68"],["f2f7bc9d.5ed1e8"]]},{"id":"c8c9e048.09e4f","type":"ui_text","z":"8eae0a4c.0fa16","group":"6d3ea4cd.2130d4","order":2,"width":2,"height":1,"name":"WindSpeed","label":"","format":"{{msg.payload}}","layout":"row-center","x":960,"y":320,"wires":[]},{"id":"aef3b4a8.7ecf68","type":"ui_text","z":"8eae0a4c.0fa16","group":"b73d4bfc.9cb888","order":4,"width":"2","height":"1","name":"Sunrise","label":"","format":"{{msg.payload}}","layout":"col-center","x":950,"y":460,"wires":[]},{"id":"f2f7bc9d.5ed1e8","type":"ui_text","z":"8eae0a4c.0fa16","group":"b73d4bfc.9cb888","order":6,"width":"2","height":"1","name":"Sunset","label":"","format":"{{msg.payload}}","layout":"col-center","x":950,"y":540,"wires":[]},{"id":"b6b14112.7a39e8","type":"ui_template","z":"8eae0a4c.0fa16","group":"b73d4bfc.9cb888","name":"Sunrise Icon","order":3,"width":"1","height":"1","format":"<link rel=\"stylesheet\" href=\"/weather-icons/mycss/weather-icons.min.css\">\n<div style=\"display: flex;height: 100%;justify-content: left;align-items: center;\">\n<i class=\"fa-2x wi wi-sunrise\"></i>\n</div> ","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":960,"y":420,"wires":[[]]},{"id":"d29815b5.eaeef","type":"ui_template","z":"8eae0a4c.0fa16","group":"b73d4bfc.9cb888","name":"Sunset Icon","order":5,"width":"1","height":"1","format":"<link rel=\"stylesheet\" href=\"/weather-icons/mycss/weather-icons.min.css\">\n<div style=\"display: flex;height: 100%;justify-content: left;align-items: center;\">\n<i class=\"fa-2x wi wi-sunset\"></i>\n</div> ","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":960,"y":500,"wires":[[]]},{"id":"efa08bbf.24bf98","type":"ui_template","z":"8eae0a4c.0fa16","group":"6d3ea4cd.2130d4","name":"WindDirection icon","order":3,"width":1,"height":1,"format":"<link rel=\"stylesheet\" href=\"/weather-icons/mycss/weather-icons-wind.css\">\n<div style=\"display: flex;height: 100%;justify-content: center;align-items: center;\">\n<i class=\"fa-2x wi wi-wind {{msg.payload}}\"></i>\n</div> ","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":980,"y":360,"wires":[[]]},{"id":"da67d805.2cb6d","type":"openweathermap","z":"8eae0a4c.0fa16","name":"Current Weather","wtype":"current","lon":"11.61","lat":"48.07","city":"","country":"","language":"de","x":350,"y":160,"wires":[["3fc59fad.1074c","83b87615.d02b3"]]},{"id":"b19a219.cf715e","type":"ui_template","z":"8eae0a4c.0fa16","group":"6d3ea4cd.2130d4","name":"WindSpeed Icon","order":1,"width":1,"height":1,"format":"<link rel=\"stylesheet\" href=\"/weather-icons/mycss/weather-icons-wind.css\">\n<div style=\"display: flex;height: 100%;justify-content: left;align-items: center;\">\n<i class=\"fa-2x wi wi-wind {{msg.payload}}\"></i>\n</div>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":false,"templateScope":"local","x":980,"y":280,"wires":[[]]},{"id":"2d58cfb3.8d3958","type":"debug","z":"8eae0a4c.0fa16","name":"Forecast debug","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","x":970,"y":960,"wires":[]},{"id":"2f8e56d0.cf6022","type":"comment","z":"8eae0a4c.0fa16","name":"Open Weather API für aktuelles Wetter und Forecast","info":"","x":460,"y":80,"wires":[]},{"id":"3c530ca4.18ce4c","type":"ui_template","z":"8eae0a4c.0fa16","group":"ea3ecfac.e00778","name":"Condition Icon","order":1,"width":2,"height":2,"format":"<link rel=\"stylesheet\" href=\"/weather-icons/mycss/weather-icons.min.css\">\n<div style=\"display: flex;height: 100%;justify-content: center;align-items: center;\">\n<i class=\"wi wi-{{msg.payload}}\"></i>\n</div>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":false,"templateScope":"local","x":970,"y":200,"wires":[[]]},{"id":"a3bdfb30.3d015","type":"openweathermap","z":"8eae0a4c.0fa16","name":"5 Day Forecast","wtype":"forecast","lon":"11.61","lat":"48.07","city":"","country":"","language":"de","x":330,"y":620,"wires":[["548ed193.45d98","c714d923.a5601","e1c01be5.3c94a","2d58cfb3.8d3958"]]},{"id":"548ed193.45d98","type":"function","z":"8eae0a4c.0fa16","name":"Prepare Forecast Icon","func":"var wfcIcon1 = {};\nvar wfcIcon2 = {}; \nvar wfcIcon3 = {};\nvar wfcIcon4 = {};\nvar wfcIcon5 = {};\nvar wfcIcon6 = {};\nvar wfcIcon7 = {};\nvar wfcIcon8 = {};\n\n\nvar date = new Date ();\n\n/* Function for Time Conversions */\n\nfunction timeConverter(UNIX_timestamp){\n  var a = new Date(UNIX_timestamp * 1000);\n  var hour = a.getHours();\n  var min = a.getMinutes();\n  if (min < 10) {min = \"0\" + min;}\n    else {min = min;}\n  var sec = a.getSeconds();\n  if (sec < 10) {sec = \"0\" + sec;}\n    else {sec = sec;}\n    \n  var time = hour + ':' + min; /* + ':' + sec ;*/\n  return time;\n}\n\n/* Convert OpenWeeather Map Icon to https://erikflowers.github.io/weather-icons/ */\n\nconst owIconMap = new Map();\n\nowIconMap.set('01d', 'wi-day-sunny'); // clear sky\nowIconMap.set('02d', 'wi-day-cloudy'); // few clouds\nowIconMap.set('03d', 'wi-cloud'); // scattered clouds\nowIconMap.set('04d', 'wi-cloudy'); // broken clouds\nowIconMap.set('09d', 'wi-day-showers'); // shower rain\nowIconMap.set('10d', 'wi-day-rain'); // rain\nowIconMap.set('11d', 'wi-thunderstorm'); // thunderstorm\nowIconMap.set('13d', 'wi-snow'); // snow\nowIconMap.set('50d', 'wi-fog'); // mist\nowIconMap.set('01n', 'wi-night-clear'); // clear sky\nowIconMap.set('02n', 'wi-night-alt-cloudy'); // few clouds\nowIconMap.set('03n', 'wi-cloud'); // scattered clouds\nowIconMap.set('04n', 'wi-cloudy'); // broken clouds\nowIconMap.set('09n', 'wi-night-alt-showers'); // shower rain\nowIconMap.set('10n', 'wi-night-alt-rain'); // rain\nowIconMap.set('11n', 'wi-thunderstorm'); // thunderstorm\nowIconMap.set('13n', 'wi-snow'); // snow\nowIconMap.set('50n', 'wi-fog'); // mist\n\nwfcIcon1.topic = msg.payload[0].dt_txt;\nwfcIcon1.payload = owIconMap.get(msg.payload[0].weather[0].icon);\n\nwfcIcon2.topic = msg.payload[1].dt_txt;\nwfcIcon2.payload = owIconMap.get(msg.payload[1].weather[0].icon);\n\nwfcIcon3.topic = msg.payload[2].dt_txt;\nwfcIcon3.payload = owIconMap.get(msg.payload[2].weather[0].icon);\n\nwfcIcon4.topic = msg.payload[3].dt_txt;\nwfcIcon4.payload = owIconMap.get(msg.payload[3].weather[0].icon);\n\nwfcIcon5.topic = msg.payload[4].dt_txt;\nwfcIcon5.payload = owIconMap.get(msg.payload[4].weather[0].icon);\n\nwfcIcon6.topic = msg.payload[5].dt_txt;\nwfcIcon6.payload = owIconMap.get(msg.payload[5].weather[0].icon);\n\nwfcIcon7.topic = msg.payload[6].dt_txt;\nwfcIcon7.payload = owIconMap.get(msg.payload[6].weather[0].icon);\n\nwfcIcon8.topic = msg.payload[7].dt_txt;\nwfcIcon8.payload = owIconMap.get(msg.payload[7].weather[0].icon);\n\n\nowIconMap.clear(); //freeing resource\n\nreturn [wfcIcon1, wfcIcon2, wfcIcon3, wfcIcon4, wfcIcon5, wfcIcon6, wfcIcon7, wfcIcon8];","outputs":8,"noerr":0,"x":670,"y":680,"wires":[["420cc1af.d0cd7"],["b24f2312.f38088"],["a2c6ed23.33be58"],["c712d21d.24c93"],["c1ff13ce.13394"],["eb8c5d47.dbb65"],["2608558c.157a7a"],["b721adae.41cc98"]]},{"id":"420cc1af.d0cd7","type":"ui_template","z":"8eae0a4c.0fa16","group":"2fb24bee.14dcdc","name":"WFc Icon 1","order":2,"width":1,"height":1,"format":"<link rel=\"stylesheet\" href=\"/weather-icons/mycss/weather-icons.min.css\">\n<div style=\"display: flex;height: 100%;justify-content: center;align-items: center;\">\n<i class=\"fa-1x wi {{msg.payload}}\"></i>\n</div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":960,"y":620,"wires":[[]]},{"id":"b24f2312.f38088","type":"ui_template","z":"8eae0a4c.0fa16","group":"2fb24bee.14dcdc","name":"WFc Icon 2","order":3,"width":1,"height":1,"format":"<link rel=\"stylesheet\" href=\"/weather-icons/mycss/weather-icons.min.css\">\n<div style=\"display: flex;height: 100%;justify-content: center;align-items: center;\">\n<i class=\"fa-1x wi {{msg.payload}}\"></i>\n</div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":960,"y":660,"wires":[[]]},{"id":"a2c6ed23.33be58","type":"ui_template","z":"8eae0a4c.0fa16","group":"2fb24bee.14dcdc","name":"WFc Icon 3","order":4,"width":1,"height":1,"format":"<link rel=\"stylesheet\" href=\"/weather-icons/mycss/weather-icons.min.css\">\n<div style=\"display: flex;height: 100%;justify-content: center;align-items: center;\">\n<i class=\"fa-1x wi {{msg.payload}}\"></i>\n</div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":960,"y":700,"wires":[[]]},{"id":"c712d21d.24c93","type":"ui_template","z":"8eae0a4c.0fa16","group":"2fb24bee.14dcdc","name":"WFc Icon 4","order":5,"width":1,"height":1,"format":"<link rel=\"stylesheet\" href=\"/weather-icons/mycss/weather-icons.min.css\">\n<div style=\"display: flex;height: 100%;justify-content: center;align-items: center;\">\n<i class=\"fa-1x wi {{msg.payload}}\"></i>\n</div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":960,"y":740,"wires":[[]]},{"id":"c1ff13ce.13394","type":"ui_template","z":"8eae0a4c.0fa16","group":"2fb24bee.14dcdc","name":"WFc Icon 5","order":6,"width":1,"height":1,"format":"<link rel=\"stylesheet\" href=\"/weather-icons/mycss/weather-icons.min.css\">\n<div style=\"display: flex;height: 100%;justify-content: center;align-items: center;\">\n<i class=\"fa-1x wi {{msg.payload}}\"></i>\n</div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":960,"y":780,"wires":[[]]},{"id":"eb8c5d47.dbb65","type":"ui_template","z":"8eae0a4c.0fa16","group":"2fb24bee.14dcdc","name":"WFc Icon 6","order":7,"width":1,"height":1,"format":"<link rel=\"stylesheet\" href=\"/weather-icons/mycss/weather-icons.min.css\">\n<div style=\"display: flex;height: 100%;justify-content: center;align-items: center;\">\n<i class=\"fa-1x wi {{msg.payload}}\"></i>\n</div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":960,"y":820,"wires":[[]]},{"id":"2608558c.157a7a","type":"ui_template","z":"8eae0a4c.0fa16","group":"2fb24bee.14dcdc","name":"WFc Icon 7","order":8,"width":1,"height":1,"format":"<link rel=\"stylesheet\" href=\"/weather-icons/mycss/weather-icons.min.css\">\n<div style=\"display: flex;height: 100%;justify-content: center;align-items: center;\">\n<i class=\"fa-1x wi {{msg.payload}}\"></i>\n</div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":960,"y":860,"wires":[[]]},{"id":"b721adae.41cc98","type":"ui_template","z":"8eae0a4c.0fa16","group":"2fb24bee.14dcdc","name":"WFc Icon 8","order":9,"width":1,"height":1,"format":"<link rel=\"stylesheet\" href=\"/weather-icons/mycss/weather-icons.min.css\">\n<div style=\"display: flex;height: 100%;justify-content: center;align-items: center;\">\n<i class=\"fa-1x wi {{msg.payload}}\"></i>\n</div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":960,"y":900,"wires":[[]]},{"id":"c714d923.a5601","type":"function","z":"8eae0a4c.0fa16","name":"Prepare Forecast Data","func":"var fcdata = {};\n\nfcdata.payload = {\n  forecast: {\n    dt00: {\n      dt_txt: msg.payload[0].dt_txt,\n      temp_min: msg.payload[0].main.temp_min,\n      temp_max: msg.payload[0].main.temp_max,\n      temp: msg.payload[0].main.temp,\n      desc: msg.payload[0].weather[0].description\n    },\n    dt01: {\n      dt_txt: msg.payload[1].dt_txt,\n      temp_min: msg.payload[1].main.temp_min,\n      temp_max: msg.payload[1].main.temp_max,\n      temp: msg.payload[1].main.temp,\n      desc: msg.payload[1].weather[0].description\n    },\n    dt02: {\n      dt_txt: msg.payload[2].dt_txt,\n      temp_min: msg.payload[2].main.temp_min,\n      temp_max: msg.payload[2].main.temp_max,\n      temp: msg.payload[2].main.temp,\n      desc: msg.payload[2].weather[0].description\n    },\n    dt03: {\n      dt_txt: msg.payload[3].dt_txt,\n      temp_min: msg.payload[3].main.temp_min,\n      temp_max: msg.payload[3].main.temp_max,\n      temp: msg.payload[3].main.temp,\n      desc: msg.payload[3].weather[0].description\n    },\n    dt04: {\n      dt_txt: msg.payload[4].dt_txt,\n      temp_min: msg.payload[4].main.temp_min,\n      temp_max: msg.payload[4].main.temp_max,\n      temp: msg.payload[4].main.temp,\n      desc: msg.payload[4].weather[0].description\n    },\n    dt05: {\n      dt_txt: msg.payload[5].dt_txt,\n      temp_min: msg.payload[5].main.temp_min,\n      temp_max: msg.payload[5].main.temp_max,\n      temp: msg.payload[5].main.temp,\n      desc: msg.payload[5].weather[0].description\n    },\n    dt06: {\n      dt_txt: msg.payload[6].dt_txt,\n      temp_min: msg.payload[6].main.temp_min,\n      temp_max: msg.payload[6].main.temp_max,\n      temp: msg.payload[6].main.temp,\n      desc: msg.payload[6].weather[0].description\n    },\n    dt07: {\n      dt_txt: msg.payload[7].dt_txt,\n      temp_min: msg.payload[7].main.temp_min,\n      temp_max: msg.payload[7].main.temp_max,\n      temp: msg.payload[7].main.temp,\n      desc: msg.payload[7].weather[0].description\n    }\n  }\n}\n\n\n\nreturn fcdata;","outputs":1,"noerr":0,"x":670,"y":960,"wires":[[]]},{"id":"f74e6082.480db8","type":"ui_template","z":"8eae0a4c.0fa16","group":"2fb24bee.14dcdc","name":"Forecast","order":1,"width":8,"height":1,"format":"<div layout=\"row\" layout-align=\"space-around start\" ng-repeat=\"data in msg.payload.row\">\n  <span flex style=\"color: white\">{{data.cell01}}</span>\n  <span flex style=\"color: white\">{{data.cell02}}</span>\n  <span flex style=\"color: white\">{{data.cell03}}</span>\n  <span flex style=\"color: white\">{{data.cell04}}</span>\n  <span flex style=\"color: white\">{{data.cell05}}</span>\n  <span flex style=\"color: white\">{{data.cell06}}</span>\n  <span flex style=\"color: white\">{{data.cell07}}</span>\n  <span flex style=\"color: white\">{{data.cell08}}</span>\n</div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":950,"y":1080,"wires":[[]]},{"id":"e1c01be5.3c94a","type":"function","z":"8eae0a4c.0fa16","name":"Prepare forecast for UI widget","func":"var fcdata = {};\n\n// prepare forecast data for CSS based ui widget\n\nfcdata.payload = {\n  row: {\n  \tdata01: {\n  \t\tcell01: msg.payload[0].dt_txt.substring(11, 16),\n  \t\tcell02: msg.payload[1].dt_txt.substring(11, 16),\n  \t\tcell03: msg.payload[2].dt_txt.substring(11, 16),\n  \t\tcell04: msg.payload[3].dt_txt.substring(11, 16),\n  \t\tcell05: msg.payload[4].dt_txt.substring(11, 16),\n  \t\tcell06: msg.payload[5].dt_txt.substring(11, 16),\n  \t\tcell07: msg.payload[6].dt_txt.substring(11, 16),\n  \t\tcell08: msg.payload[7].dt_txt.substring(11, 16)\n  \t},\n  \tdata02: {\n  \t\tcell01: msg.payload[0].main.temp,\n  \t\tcell02: msg.payload[1].main.temp,\n  \t\tcell03: msg.payload[2].main.temp,\n  \t\tcell04: msg.payload[3].main.temp,\n  \t\tcell05: msg.payload[4].main.temp,\n  \t\tcell06: msg.payload[5].main.temp,\n  \t\tcell07: msg.payload[6].main.temp,\n  \t\tcell08: msg.payload[7].main.temp\n  \t}\n  }\n}\n\nreturn fcdata;","outputs":1,"noerr":0,"x":710,"y":1100,"wires":[["f74e6082.480db8"]]},{"id":"84947647.992808","type":"ui_template","z":"8eae0a4c.0fa16","group":"ea3ecfac.e00778","name":"Condition Icon","order":1,"width":2,"height":2,"format":"<i class=\"wi wi-day-sunny\"></i>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":false,"templateScope":"local","x":980,"y":80,"wires":[[]]},{"id":"3630732a.7cb384","type":"subflow:8544e604.9bf28","z":"ea3852ff.87d0d","name":"","env":[{"name":"SentToSlack","value":"true","type":"bool"}],"x":710,"y":620,"wires":[],"icon":"font-awesome/fa-exclamation"},{"id":"85494edb.fc4a98","type":"catch","z":"ea3852ff.87d0d","name":"","scope":null,"uncaught":false,"x":360,"y":620,"wires":[["f0da438b.89ee2"]]},{"id":"f0da438b.89ee2","type":"getflowid","z":"ea3852ff.87d0d","name":"Get Flow ID","x":530,"y":620,"wires":[["3630732a.7cb384"]]},{"id":"ed75afe4.5db898","type":"subflow:8544e604.9bf28","z":"584378c2.3e16c8","name":"","env":[{"name":"SentToSlack","value":"true","type":"bool"}],"x":470,"y":360,"wires":[],"icon":"font-awesome/fa-exclamation"},{"id":"eb70fd95.89fea","type":"catch","z":"584378c2.3e16c8","name":"","scope":null,"uncaught":false,"x":120,"y":360,"wires":[["af2b80ae.6ada5"]]},{"id":"af2b80ae.6ada5","type":"getflowid","z":"584378c2.3e16c8","name":"Get Flow ID","x":290,"y":360,"wires":[["ed75afe4.5db898"]]},{"id":"15cae91b.25585f","type":"subflow:8544e604.9bf28","z":"8411b0ae.d4815","name":"","env":[{"name":"SentToSlack","value":"true","type":"bool"}],"x":690,"y":1060,"wires":[],"icon":"font-awesome/fa-exclamation"},{"id":"dd97b825.2c1248","type":"catch","z":"8411b0ae.d4815","name":"","scope":null,"uncaught":false,"x":340,"y":1060,"wires":[["f4490abb.ddd5"]]},{"id":"f4490abb.ddd5","type":"getflowid","z":"8411b0ae.d4815","name":"Get Flow ID","x":510,"y":1060,"wires":[["15cae91b.25585f"]]},{"id":"17cba99d.439226","type":"subflow:8544e604.9bf28","z":"6ec04d69.f792c4","name":"","env":[{"name":"SentToSlack","value":"true","type":"bool"}],"x":790,"y":720,"wires":[],"icon":"font-awesome/fa-exclamation"},{"id":"bd371cf4.fb08a","type":"catch","z":"6ec04d69.f792c4","name":"","scope":null,"uncaught":false,"x":440,"y":720,"wires":[["d6af2146.98176"]]},{"id":"d6af2146.98176","type":"getflowid","z":"6ec04d69.f792c4","name":"Get Flow ID","x":610,"y":720,"wires":[["17cba99d.439226"]]},{"id":"e60e3c0f.4aa9f","type":"subflow:8544e604.9bf28","z":"8eae0a4c.0fa16","name":"","env":[{"name":"SentToSlack","value":"true","type":"bool"}],"x":590,"y":1260,"wires":[],"icon":"font-awesome/fa-exclamation"},{"id":"ab298e4c.805718","type":"catch","z":"8eae0a4c.0fa16","name":"","scope":null,"uncaught":false,"x":220,"y":1260,"wires":[["5eb4469.45f4638"]]},{"id":"5eb4469.45f4638","type":"getflowid","z":"8eae0a4c.0fa16","name":"Get Flow ID","x":410,"y":1260,"wires":[["e60e3c0f.4aa9f"]]}]