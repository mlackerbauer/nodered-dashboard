[{"id":"885f38dd.64a8b","type":"tab","label":"Bewegungsmelder","disabled":false,"info":""},{"id":"8544e604.9bf28","type":"subflow","name":"Errorhandler","info":"","category":"","in":[{"x":60,"y":40,"wires":[{"id":"66316629.0a05b"},{"id":"590d362e.ea16a8"},{"id":"f2ef2fbe.6b32e8"}]}],"out":[],"env":[{"name":"SentToSlack","type":"bool","value":"false","ui":{"icon":"font-awesome/fa-bell-slash-o","label":{},"type":"input","opts":{"types":["str","num","bool","json","bin","env"]}}},{"name":"LogToDebug","type":"bool","value":"true"},{"name":"LogToConsole","type":"bool","value":"true"}],"color":"#DDAA99"},{"id":"f8eade98.d4c83","type":"ui_base","theme":{"name":"theme-dark","lightTheme":{"default":"#0094CE","baseColor":"#0094CE","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"darkTheme":{"default":"#097479","baseColor":"#097479","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"customTheme":{"name":"Untitled Theme 1","default":"#4B7930","baseColor":"#4B7930","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","reset":false},"themeState":{"base-color":{"default":"#097479","value":"#097479","edited":false},"page-titlebar-backgroundColor":{"value":"#097479","edited":false},"page-backgroundColor":{"value":"#111111","edited":false},"page-sidebar-backgroundColor":{"value":"#000000","edited":false},"group-textColor":{"value":"#0eb8c0","edited":false},"group-borderColor":{"value":"#555555","edited":false},"group-backgroundColor":{"value":"#333333","edited":false},"widget-textColor":{"value":"#eeeeee","edited":false},"widget-backgroundColor":{"value":"#097479","edited":false},"widget-borderColor":{"value":"#333333","edited":false},"base-font":{"value":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"}},"angularTheme":{"primary":"indigo","accents":"blue","warn":"red","background":"grey"}},"site":{"name":"Dashboard","hideToolbar":"false","allowSwipe":"true","lockMenu":"true","allowTempTheme":"true","dateFormat":"DD/MM/YYYY","sizes":{"sx":48,"sy":48,"gx":6,"gy":6,"cx":6,"cy":6,"px":0,"py":0}}},{"id":"1eaefd75.304423","type":"ui_tab","z":"","name":"Home","icon":"device_hub","order":2,"disabled":false,"hidden":false},{"id":"c9050ce9.3baf1","type":"ui_group","z":"","name":"Default","tab":"1eaefd75.304423","order":1,"disp":true,"width":"6","collapse":false},{"id":"ff4bc735.559d78","type":"ui_tab","z":"","name":"Status","icon":"dashboard","order":1,"disabled":false,"hidden":false},{"id":"a1521b71.7d2d2","type":"ui_group","z":"","name":"Default","tab":"ff4bc735.559d78","order":1,"disp":true,"width":"6","collapse":true},{"id":"1329504f.193148","type":"ui_link","z":"","name":"Link 3","link":"http://www.orf.at","icon":"open_in_browser","target":"newtab","order":3},{"id":"ad710dfa.62646","type":"ui_group","z":"","name":"Bewegungsmelder","tab":"1eaefd75.304423","order":2,"disp":true,"width":"6","collapse":false},{"id":"3de2bfe.885bdc","type":"mqtt-broker","z":"","name":"Mosquito","broker":"192.168.178.41","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthRetain":"false","birthPayload":"","closeTopic":"","closeQos":"0","closeRetain":"false","closePayload":"","willTopic":"","willQos":"0","willRetain":"false","willPayload":""},{"id":"6e5cbd28.1b9ad4","type":"mqtt-broker","z":"","name":"Mosquitto","broker":"192.168.178.41","port":"1883","clientid":"nr-sh-tesla","usetls":false,"compatmode":true,"keepalive":"60","cleansession":false,"birthTopic":"","birthQos":"0","birthRetain":"false","birthPayload":"","closeTopic":"","closeQos":"0","closeRetain":"false","closePayload":"","willTopic":"","willQos":"0","willRetain":"false","willPayload":""},{"id":"c6991e8d.dde878","type":"ui_led","z":"885f38dd.64a8b","group":"ad710dfa.62646","order":2,"width":0,"height":0,"label":"KÃ¼che","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"red","value":"false","valueType":"bool"},{"color":"green","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"name":"KuecheSensor","x":560,"y":100,"wires":[]},{"id":"b0212a87.b8e9f","type":"ui_led","z":"885f38dd.64a8b","group":"ad710dfa.62646","order":2,"width":0,"height":0,"label":"Wohnzimmer","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"red","value":"false","valueType":"bool"},{"color":"green","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"name":"WohnzimmerSensor","x":580,"y":220,"wires":[]},{"id":"59596c04.70be8c","type":"ui_led","z":"885f38dd.64a8b","group":"ad710dfa.62646","order":2,"width":0,"height":0,"label":"Bad","labelPlacement":"left","labelAlignment":"left","colorForValue":[{"color":"red","value":"false","valueType":"bool"},{"color":"green","value":"true","valueType":"bool"}],"allowColorForValueInMessage":false,"name":"BadSensor","x":550,"y":160,"wires":[]},{"id":"77bfc098.ffe258","type":"mqtt in","z":"885f38dd.64a8b","name":"","topic":"/dashboard/in/motion/kueche/status","qos":"2","datatype":"json","broker":"3de2bfe.885bdc","x":260,"y":100,"wires":[["c6991e8d.dde878"]]},{"id":"622f8cc9.8761d4","type":"mqtt in","z":"885f38dd.64a8b","name":"","topic":"/dashboard/in/motion/bad/status","qos":"2","datatype":"json","broker":"3de2bfe.885bdc","x":270,"y":160,"wires":[["59596c04.70be8c"]]},{"id":"7b9fb2f4.3cd3cc","type":"mqtt in","z":"885f38dd.64a8b","name":"","topic":"/dashboard/in/motion/wohnzimmer/status","qos":"2","datatype":"json","broker":"3de2bfe.885bdc","x":240,"y":220,"wires":[["b0212a87.b8e9f"]]},{"id":"4cd64731.71cb68","type":"debug","z":"8544e604.9bf28","name":"Log Debug","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":670,"y":40,"wires":[]},{"id":"1a497a6c.f2aabe","type":"mqtt out","z":"8544e604.9bf28","name":"","topic":"/slack/smarthome/out","qos":"","retain":"","broker":"6e5cbd28.1b9ad4","x":700,"y":160,"wires":[]},{"id":"66316629.0a05b","type":"switch","z":"8544e604.9bf28","name":"Slack","property":"SentToSlack","propertyType":"env","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":250,"y":160,"wires":[["82d4a63f.43af08"]]},{"id":"2602623.67c029e","type":"catch","z":"8544e604.9bf28","name":"","scope":null,"uncaught":false,"x":80,"y":460,"wires":[["919938d0.81b93"]]},{"id":"919938d0.81b93","type":"debug","z":"8544e604.9bf28","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":450,"y":460,"wires":[]},{"id":"82d4a63f.43af08","type":"function","z":"8544e604.9bf28","name":"Error Message","func":"var sFlowname = msg.flowinfo.flowname;\nvar sMessage = msg.error.message;\nvar sNode = msg.error.source.name;\n\nmsg.payload = {\n    \"text\": \"Failure in flow *\" + sFlowname + \"* in node *\" + sNode + \"*. \\n`\" + sMessage + \"`\"\n}\nreturn msg;","outputs":1,"noerr":0,"x":440,"y":160,"wires":[["1a497a6c.f2aabe"]]},{"id":"590d362e.ea16a8","type":"switch","z":"8544e604.9bf28","name":"Debug","property":"LogToDebug","propertyType":"env","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":250,"y":40,"wires":[["4cd64731.71cb68"]]},{"id":"f2ef2fbe.6b32e8","type":"switch","z":"8544e604.9bf28","name":"Console","property":"LogToConsole","propertyType":"env","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":260,"y":100,"wires":[["34d6d726.3c681"]]},{"id":"34d6d726.3c681","type":"debug","z":"8544e604.9bf28","name":"Log Console","active":true,"tosidebar":false,"console":true,"tostatus":false,"complete":"true","targetType":"full","x":680,"y":100,"wires":[]},{"id":"6d7439b1.7b03b8","type":"subflow:8544e604.9bf28","z":"885f38dd.64a8b","name":"","env":[{"name":"SentToSlack","value":"true","type":"bool"}],"x":550,"y":500,"wires":[],"icon":"font-awesome/fa-exclamation"},{"id":"a22d20af.84c74","type":"catch","z":"885f38dd.64a8b","name":"","scope":null,"uncaught":false,"x":200,"y":500,"wires":[["1c5abf30.a814c1"]]},{"id":"1c5abf30.a814c1","type":"getflowid","z":"885f38dd.64a8b","name":"Get Flow ID","x":370,"y":500,"wires":[["6d7439b1.7b03b8"]]}]